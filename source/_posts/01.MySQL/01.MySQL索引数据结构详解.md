---
title: MySQL索引数据结构详解
date: 2022-08-31 01:56:40
permalink: /pages/1c9782/
categories:
  - MySQL
tags:
  - 
---
### 内容

1. 索引数据结构红黑树,Hash,B+树等
2. 千万级数据表如何用B+树索引快速查找
3. 聚集索引&聚簇索引&稀疏索引是什么
4. 为什么DBA推荐用自增主键做索引
5. 联合索引底层数据结构是怎么样的
6. MySQL最左前缀优化原则

**索引的本质**

索引是帮助MySQL高效获取数据的排好序的数据结构

索引数据结构

- 二叉树

  极端情况下会变成一条直线

- 红黑树

  相比于二叉树，数据平衡了，但是在数据比较多的情况下，树的高度会比较高，查询数据困难

- Hash表

- B-Tree

*B-Tree*

- 叶节点具有相同的深度，叶节点的指针为空
- 所有索引元素不重复
- 节点中的数据索引从左到右递增排列

![](https://img.jssjqd.cn/20221025015342.png)

*B+Tree(B-Tree变种)*

- 非叶子节点不存储data，只存储索引(冗余)，可以放更多的索引
- 叶子节点包含所有索引字段
- 叶子节点用指针连接，提高区间访问的性能

![](https://img.jssjqd.cn/20221025015420.png)

*B+Tree对比B-Tree的优点：*

- B+Tree 解决的两大问题是（每个节点存储更多关键字；路数更多）

- 扫库、扫表能力更强（如果我们要对表进行全表扫描，只需要遍历叶子节点就可以了，不需要遍历整棵 B+Tree 拿到所有的数据）

- B+Tree 的磁盘读写能力相对于 B Tree 来说更强，同数据量下磁盘I/0次数更少（根节点和枝节点不保存数据区，所以一个节点可以保存更多的关键字，一次磁盘加载的关键字更多）
- 范围查询和排序能力更强（因为叶子节点上有下一个数据区的指针，数据形成了链表）

- 效率更加稳定（B+Tree 永远是在叶子节点拿到数据，所以 IO 次数是稳定的）
  
