<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.62" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://mister-hope.github.io/pages/fc5564/"><meta property="og:site_name" content="å­¦ä¹ ç¬”è®°"><meta property="og:title" content="è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼"><meta property="og:description" content="è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ï¼š è¿›ç¨‹é—´é€šä¿¡çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œè¿™é‡Œä¸»è¦è®²åˆ°è¿›ç¨‹é—´é€šä¿¡çš„å…­ç§æ–¹å¼ï¼Œåˆ†åˆ«ä¸ºï¼šç®¡é“ã€FIFOã€æ¶ˆæ¯é˜Ÿåˆ—ã€å…±äº«å†…å­˜ã€ä¿¡å·ã€ä¿¡å·é‡ã€‚ å‚è€ƒæ–‡ç« ï¼šhttps://blog.csdn.net/qq_34343254/article/details/107431229 ä¸€ã€ç®¡é“ ç®¡é“çš„ç‰¹ç‚¹ï¼š"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-08-04T19:54:20.000Z"><meta property="article:author" content="æ±Ÿ"><meta property="article:published_time" content="2022-11-20T14:33:33.000Z"><meta property="article:modified_time" content="2023-08-04T19:54:20.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼","image":[""],"datePublished":"2022-11-20T14:33:33.000Z","dateModified":"2023-08-04T19:54:20.000Z","author":[{"@type":"Person","name":"æ±Ÿ"}]}</script><title>è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼ | å­¦ä¹ ç¬”è®°</title><meta name="description" content="è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ï¼š è¿›ç¨‹é—´é€šä¿¡çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œè¿™é‡Œä¸»è¦è®²åˆ°è¿›ç¨‹é—´é€šä¿¡çš„å…­ç§æ–¹å¼ï¼Œåˆ†åˆ«ä¸ºï¼šç®¡é“ã€FIFOã€æ¶ˆæ¯é˜Ÿåˆ—ã€å…±äº«å†…å­˜ã€ä¿¡å·ã€ä¿¡å·é‡ã€‚ å‚è€ƒæ–‡ç« ï¼šhttps://blog.csdn.net/qq_34343254/article/details/107431229 ä¸€ã€ç®¡é“ ç®¡é“çš„ç‰¹ç‚¹ï¼š">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-850a8bcc.css" as="style"><link rel="stylesheet" href="/assets/style-850a8bcc.css">
    <link rel="modulepreload" href="/assets/app-f4353c56.js"><link rel="modulepreload" href="/assets/index.html-becda579.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-c27b6911.js"><link rel="modulepreload" href="/assets/index.html-dea7e948.js"><link rel="prefetch" href="/assets/index.html-5f01c542.js" as="script"><link rel="prefetch" href="/assets/index.html-08138681.js" as="script"><link rel="prefetch" href="/assets/index.html-d14d0c68.js" as="script"><link rel="prefetch" href="/assets/index.html-98383a1a.js" as="script"><link rel="prefetch" href="/assets/04-Springä¹‹Beanç”Ÿå‘½å‘¨æœŸæºç è§£æä¸Š.html-dcf53bc4.js" as="script"><link rel="prefetch" href="/assets/index.html-40146f04.js" as="script"><link rel="prefetch" href="/assets/index.html-7c6de113.js" as="script"><link rel="prefetch" href="/assets/index.html-90c4edb6.js" as="script"><link rel="prefetch" href="/assets/index.html-5740cc96.js" as="script"><link rel="prefetch" href="/assets/index.html-79f5cf89.js" as="script"><link rel="prefetch" href="/assets/index.html-d42c9465.js" as="script"><link rel="prefetch" href="/assets/index.html-fbfeb765.js" as="script"><link rel="prefetch" href="/assets/index.html-a52ad201.js" as="script"><link rel="prefetch" href="/assets/index.html-adeb5ba1.js" as="script"><link rel="prefetch" href="/assets/index.html-13d75c62.js" as="script"><link rel="prefetch" href="/assets/index.html-339df355.js" as="script"><link rel="prefetch" href="/assets/index.html-06915e7d.js" as="script"><link rel="prefetch" href="/assets/index.html-6d0b2ab3.js" as="script"><link rel="prefetch" href="/assets/index.html-586f2c43.js" as="script"><link rel="prefetch" href="/assets/index.html-bf02eb80.js" as="script"><link rel="prefetch" href="/assets/index.html-dbeee8f1.js" as="script"><link rel="prefetch" href="/assets/index.html-ee64cb4d.js" as="script"><link rel="prefetch" href="/assets/index.html-674a8b56.js" as="script"><link rel="prefetch" href="/assets/index.html-58ab8062.js" as="script"><link rel="prefetch" href="/assets/index.html-83a0e995.js" as="script"><link rel="prefetch" href="/assets/index.html-b73af924.js" as="script"><link rel="prefetch" href="/assets/index.html-84b41bc2.js" as="script"><link rel="prefetch" href="/assets/index.html-513b3acd.js" as="script"><link rel="prefetch" href="/assets/index.html-86c88439.js" as="script"><link rel="prefetch" href="/assets/100.é«˜å¹¶å‘ç¼“å­˜å®æˆ˜.html-dcb18191.js" as="script"><link rel="prefetch" href="/assets/index.html-0cedfbf4.js" as="script"><link rel="prefetch" href="/assets/30.å¾®æœåŠ¡æ¶æ„æ‹†åˆ†å®æˆ˜.html-3cb03205.js" as="script"><link rel="prefetch" href="/assets/index.html-e73145da.js" as="script"><link rel="prefetch" href="/assets/index.html-2a667421.js" as="script"><link rel="prefetch" href="/assets/index.html-7e99793c.js" as="script"><link rel="prefetch" href="/assets/index.html-0caa24d1.js" as="script"><link rel="prefetch" href="/assets/index.html-ec040a6f.js" as="script"><link rel="prefetch" href="/assets/index.html-5c7760e6.js" as="script"><link rel="prefetch" href="/assets/index.html-e05cfd95.js" as="script"><link rel="prefetch" href="/assets/index.html-56864292.js" as="script"><link rel="prefetch" href="/assets/index.html-85f12f8e.js" as="script"><link rel="prefetch" href="/assets/index.html-36215535.js" as="script"><link rel="prefetch" href="/assets/index.html-a0b00179.js" as="script"><link rel="prefetch" href="/assets/index.html-b369598e.js" as="script"><link rel="prefetch" href="/assets/index.html-16522702.js" as="script"><link rel="prefetch" href="/assets/index.html-d4b10f11.js" as="script"><link rel="prefetch" href="/assets/index.html-32274a84.js" as="script"><link rel="prefetch" href="/assets/06.MySQLäº‹åŠ¡åŸç†ä¸ä¼˜åŒ–æœ€ä½³å®è·µ.html-e098d384.js" as="script"><link rel="prefetch" href="/assets/index.html-a1c2babe.js" as="script"><link rel="prefetch" href="/assets/index.html-5051cb2a.js" as="script"><link rel="prefetch" href="/assets/index.html-704bd40d.js" as="script"><link rel="prefetch" href="/assets/index.html-a330a4f6.js" as="script"><link rel="prefetch" href="/assets/index.html-73eb089a.js" as="script"><link rel="prefetch" href="/assets/index.html-ea985e38.js" as="script"><link rel="prefetch" href="/assets/index.html-180ee8bd.js" as="script"><link rel="prefetch" href="/assets/index.html-a4691e29.js" as="script"><link rel="prefetch" href="/assets/20.ShardingJDBCæºç ä¸å†…æ ¸è§£æ.html-e4a8ebba.js" as="script"><link rel="prefetch" href="/assets/index.html-fa35c6ae.js" as="script"><link rel="prefetch" href="/assets/index.html-a5b1adc0.js" as="script"><link rel="prefetch" href="/assets/index.html-8523baf4.js" as="script"><link rel="prefetch" href="/assets/index.html-f1423e85.js" as="script"><link rel="prefetch" href="/assets/index.html-a29aaa91.js" as="script"><link rel="prefetch" href="/assets/index.html-c522de6a.js" as="script"><link rel="prefetch" href="/assets/index.html-c2625ab5.js" as="script"><link rel="prefetch" href="/assets/index.html-15d3439f.js" as="script"><link rel="prefetch" href="/assets/index.html-4ed4f2a7.js" as="script"><link rel="prefetch" href="/assets/index.html-54029dde.js" as="script"><link rel="prefetch" href="/assets/index.html-9b058eec.js" as="script"><link rel="prefetch" href="/assets/index.html-0b0842a7.js" as="script"><link rel="prefetch" href="/assets/index.html-7ca879a5.js" as="script"><link rel="prefetch" href="/assets/index.html-088e693e.js" as="script"><link rel="prefetch" href="/assets/index.html-8491a2ab.js" as="script"><link rel="prefetch" href="/assets/index.html-2294b9e3.js" as="script"><link rel="prefetch" href="/assets/index.html-52663ab2.js" as="script"><link rel="prefetch" href="/assets/index.html-0470b4a8.js" as="script"><link rel="prefetch" href="/assets/index.html-dd96616c.js" as="script"><link rel="prefetch" href="/assets/index.html-dacf5e8c.js" as="script"><link rel="prefetch" href="/assets/index.html-0195ab12.js" as="script"><link rel="prefetch" href="/assets/index.html-81e66c91.js" as="script"><link rel="prefetch" href="/assets/index.html-21894421.js" as="script"><link rel="prefetch" href="/assets/index.html-a69111a2.js" as="script"><link rel="prefetch" href="/assets/index.html-2a70b06b.js" as="script"><link rel="prefetch" href="/assets/index.html-e1ee66ee.js" as="script"><link rel="prefetch" href="/assets/index.html-73dc6004.js" as="script"><link rel="prefetch" href="/assets/index.html-e30581c4.js" as="script"><link rel="prefetch" href="/assets/index.html-19438a35.js" as="script"><link rel="prefetch" href="/assets/index.html-a853432a.js" as="script"><link rel="prefetch" href="/assets/index.html-bccd5e37.js" as="script"><link rel="prefetch" href="/assets/index.html-ac802804.js" as="script"><link rel="prefetch" href="/assets/index.html-b2987cf7.js" as="script"><link rel="prefetch" href="/assets/index.html-017f4326.js" as="script"><link rel="prefetch" href="/assets/index.html-a3bb24a5.js" as="script"><link rel="prefetch" href="/assets/index.html-075db68e.js" as="script"><link rel="prefetch" href="/assets/index.html-a30c67c6.js" as="script"><link rel="prefetch" href="/assets/index.html-4b0b29b8.js" as="script"><link rel="prefetch" href="/assets/index.html-5adf10a2.js" as="script"><link rel="prefetch" href="/assets/index.html-e032b77c.js" as="script"><link rel="prefetch" href="/assets/index.html-247fc759.js" as="script"><link rel="prefetch" href="/assets/index.html-9723bbb5.js" as="script"><link rel="prefetch" href="/assets/index.html-b7ebaa41.js" as="script"><link rel="prefetch" href="/assets/index.html-c0f0c131.js" as="script"><link rel="prefetch" href="/assets/index.html-1c7a6a63.js" as="script"><link rel="prefetch" href="/assets/index.html-79c69ebd.js" as="script"><link rel="prefetch" href="/assets/index.html-4c87ebab.js" as="script"><link rel="prefetch" href="/assets/index.html-92f8e24b.js" as="script"><link rel="prefetch" href="/assets/index.html-dece1655.js" as="script"><link rel="prefetch" href="/assets/index.html-04a8aa76.js" as="script"><link rel="prefetch" href="/assets/index.html-c5471860.js" as="script"><link rel="prefetch" href="/assets/åˆ†å¸ƒå¼äº‹åŠ¡ç»„ä»¶Seata.html-8f82a790.js" as="script"><link rel="prefetch" href="/assets/index.html-892e0cda.js" as="script"><link rel="prefetch" href="/assets/index.html-a8692883.js" as="script"><link rel="prefetch" href="/assets/index.html-310b6b1f.js" as="script"><link rel="prefetch" href="/assets/index.html-b485e1a0.js" as="script"><link rel="prefetch" href="/assets/index.html-7b88635d.js" as="script"><link rel="prefetch" href="/assets/index.html-e002aeb8.js" as="script"><link rel="prefetch" href="/assets/index.html-7670fed3.js" as="script"><link rel="prefetch" href="/assets/index.html-c5e9c0b1.js" as="script"><link rel="prefetch" href="/assets/index.html-7eb4d909.js" as="script"><link rel="prefetch" href="/assets/02.RocketMQå¼€å‘æ¨¡å‹ä¸ç”Ÿäº§ç¯å¢ƒé—®é¢˜å‰–æ.html-a65d40cf.js" as="script"><link rel="prefetch" href="/assets/404.html-f4f9fdbe.js" as="script"><link rel="prefetch" href="/assets/index.html-ccedd87a.js" as="script"><link rel="prefetch" href="/assets/index.html-6b635626.js" as="script"><link rel="prefetch" href="/assets/index.html-f3c1ea90.js" as="script"><link rel="prefetch" href="/assets/index.html-39a19522.js" as="script"><link rel="prefetch" href="/assets/index.html-4e6ecfce.js" as="script"><link rel="prefetch" href="/assets/index.html-c37db087.js" as="script"><link rel="prefetch" href="/assets/index.html-7f2f880b.js" as="script"><link rel="prefetch" href="/assets/index.html-f8546af5.js" as="script"><link rel="prefetch" href="/assets/index.html-36e6cb8c.js" as="script"><link rel="prefetch" href="/assets/index.html-27371869.js" as="script"><link rel="prefetch" href="/assets/index.html-4c15c6fc.js" as="script"><link rel="prefetch" href="/assets/index.html-116aca17.js" as="script"><link rel="prefetch" href="/assets/index.html-2a643c60.js" as="script"><link rel="prefetch" href="/assets/index.html-21236a9b.js" as="script"><link rel="prefetch" href="/assets/index.html-b238d9f4.js" as="script"><link rel="prefetch" href="/assets/index.html-46e55ee3.js" as="script"><link rel="prefetch" href="/assets/index.html-6d53c5d1.js" as="script"><link rel="prefetch" href="/assets/index.html-778d883e.js" as="script"><link rel="prefetch" href="/assets/index.html-d798a209.js" as="script"><link rel="prefetch" href="/assets/index.html-ab8b6fb7.js" as="script"><link rel="prefetch" href="/assets/index.html-200c9b62.js" as="script"><link rel="prefetch" href="/assets/index.html-c93e5cd2.js" as="script"><link rel="prefetch" href="/assets/index.html-9fa57983.js" as="script"><link rel="prefetch" href="/assets/index.html-30ef2e2b.js" as="script"><link rel="prefetch" href="/assets/index.html-2a6dfb95.js" as="script"><link rel="prefetch" href="/assets/index.html-3fd779a7.js" as="script"><link rel="prefetch" href="/assets/index.html-0118c6d9.js" as="script"><link rel="prefetch" href="/assets/index.html-942ff972.js" as="script"><link rel="prefetch" href="/assets/index.html-41b511cf.js" as="script"><link rel="prefetch" href="/assets/index.html-2be3f4a2.js" as="script"><link rel="prefetch" href="/assets/index.html-4b04c8af.js" as="script"><link rel="prefetch" href="/assets/index.html-940c35a3.js" as="script"><link rel="prefetch" href="/assets/index.html-f3f33451.js" as="script"><link rel="prefetch" href="/assets/index.html-1a8f23e9.js" as="script"><link rel="prefetch" href="/assets/index.html-6508b456.js" as="script"><link rel="prefetch" href="/assets/index.html-ed0506a1.js" as="script"><link rel="prefetch" href="/assets/index.html-31f68f17.js" as="script"><link rel="prefetch" href="/assets/index.html-d92890df.js" as="script"><link rel="prefetch" href="/assets/index.html-b2b41008.js" as="script"><link rel="prefetch" href="/assets/index.html-ac4c44c1.js" as="script"><link rel="prefetch" href="/assets/index.html-0ef231d8.js" as="script"><link rel="prefetch" href="/assets/index.html-0c77fea3.js" as="script"><link rel="prefetch" href="/assets/index.html-256266f9.js" as="script"><link rel="prefetch" href="/assets/index.html-9e26885f.js" as="script"><link rel="prefetch" href="/assets/index.html-913c5320.js" as="script"><link rel="prefetch" href="/assets/04-Springä¹‹Beanç”Ÿå‘½å‘¨æœŸæºç è§£æä¸Š.html-01a56eed.js" as="script"><link rel="prefetch" href="/assets/index.html-771d5a5a.js" as="script"><link rel="prefetch" href="/assets/index.html-f96e0ef6.js" as="script"><link rel="prefetch" href="/assets/index.html-f22a5db7.js" as="script"><link rel="prefetch" href="/assets/index.html-fce214fe.js" as="script"><link rel="prefetch" href="/assets/index.html-23a71902.js" as="script"><link rel="prefetch" href="/assets/index.html-ac397ef1.js" as="script"><link rel="prefetch" href="/assets/index.html-c127ba3e.js" as="script"><link rel="prefetch" href="/assets/index.html-7703916c.js" as="script"><link rel="prefetch" href="/assets/index.html-1d86eadf.js" as="script"><link rel="prefetch" href="/assets/index.html-5c0dbfb6.js" as="script"><link rel="prefetch" href="/assets/index.html-f22951df.js" as="script"><link rel="prefetch" href="/assets/index.html-9b9eb0e7.js" as="script"><link rel="prefetch" href="/assets/index.html-04d083fd.js" as="script"><link rel="prefetch" href="/assets/index.html-bf82d2d5.js" as="script"><link rel="prefetch" href="/assets/index.html-710e42fe.js" as="script"><link rel="prefetch" href="/assets/index.html-1726d597.js" as="script"><link rel="prefetch" href="/assets/index.html-9ab74df1.js" as="script"><link rel="prefetch" href="/assets/index.html-1f489264.js" as="script"><link rel="prefetch" href="/assets/index.html-b692a8e7.js" as="script"><link rel="prefetch" href="/assets/index.html-98da7a26.js" as="script"><link rel="prefetch" href="/assets/index.html-b15471d6.js" as="script"><link rel="prefetch" href="/assets/index.html-546d2ebe.js" as="script"><link rel="prefetch" href="/assets/index.html-31dcb54a.js" as="script"><link rel="prefetch" href="/assets/index.html-18baa2c9.js" as="script"><link rel="prefetch" href="/assets/100.é«˜å¹¶å‘ç¼“å­˜å®æˆ˜.html-470c9528.js" as="script"><link rel="prefetch" href="/assets/index.html-d7bdc7d6.js" as="script"><link rel="prefetch" href="/assets/30.å¾®æœåŠ¡æ¶æ„æ‹†åˆ†å®æˆ˜.html-bd0a9579.js" as="script"><link rel="prefetch" href="/assets/index.html-e9de0925.js" as="script"><link rel="prefetch" href="/assets/index.html-4665c9ca.js" as="script"><link rel="prefetch" href="/assets/index.html-6f2e6903.js" as="script"><link rel="prefetch" href="/assets/index.html-0527ad65.js" as="script"><link rel="prefetch" href="/assets/index.html-1695f027.js" as="script"><link rel="prefetch" href="/assets/index.html-0339efc2.js" as="script"><link rel="prefetch" href="/assets/index.html-36e22a52.js" as="script"><link rel="prefetch" href="/assets/index.html-47de07cc.js" as="script"><link rel="prefetch" href="/assets/index.html-1e3114a4.js" as="script"><link rel="prefetch" href="/assets/index.html-f8b2f743.js" as="script"><link rel="prefetch" href="/assets/index.html-14c68d00.js" as="script"><link rel="prefetch" href="/assets/index.html-017a26b0.js" as="script"><link rel="prefetch" href="/assets/index.html-3c8c75e5.js" as="script"><link rel="prefetch" href="/assets/index.html-18747319.js" as="script"><link rel="prefetch" href="/assets/index.html-15890f18.js" as="script"><link rel="prefetch" href="/assets/06.MySQLäº‹åŠ¡åŸç†ä¸ä¼˜åŒ–æœ€ä½³å®è·µ.html-83b1a389.js" as="script"><link rel="prefetch" href="/assets/index.html-546c97bc.js" as="script"><link rel="prefetch" href="/assets/index.html-29799b4a.js" as="script"><link rel="prefetch" href="/assets/index.html-5d16a176.js" as="script"><link rel="prefetch" href="/assets/index.html-288d2385.js" as="script"><link rel="prefetch" href="/assets/index.html-4c6e04ce.js" as="script"><link rel="prefetch" href="/assets/index.html-c62199db.js" as="script"><link rel="prefetch" href="/assets/index.html-a6187740.js" as="script"><link rel="prefetch" href="/assets/index.html-8a56c9a0.js" as="script"><link rel="prefetch" href="/assets/20.ShardingJDBCæºç ä¸å†…æ ¸è§£æ.html-67af11db.js" as="script"><link rel="prefetch" href="/assets/index.html-a5ef91bf.js" as="script"><link rel="prefetch" href="/assets/index.html-4f274499.js" as="script"><link rel="prefetch" href="/assets/index.html-570eed0d.js" as="script"><link rel="prefetch" href="/assets/index.html-a28aeda9.js" as="script"><link rel="prefetch" href="/assets/index.html-c594304c.js" as="script"><link rel="prefetch" href="/assets/index.html-65524bf6.js" as="script"><link rel="prefetch" href="/assets/index.html-1ac22699.js" as="script"><link rel="prefetch" href="/assets/index.html-caf82437.js" as="script"><link rel="prefetch" href="/assets/index.html-9e90020f.js" as="script"><link rel="prefetch" href="/assets/index.html-dca36996.js" as="script"><link rel="prefetch" href="/assets/index.html-c6da5813.js" as="script"><link rel="prefetch" href="/assets/index.html-bca63335.js" as="script"><link rel="prefetch" href="/assets/index.html-00735902.js" as="script"><link rel="prefetch" href="/assets/index.html-2d168519.js" as="script"><link rel="prefetch" href="/assets/index.html-0a0f4412.js" as="script"><link rel="prefetch" href="/assets/index.html-b0283288.js" as="script"><link rel="prefetch" href="/assets/index.html-882db5c5.js" as="script"><link rel="prefetch" href="/assets/index.html-9fa015b8.js" as="script"><link rel="prefetch" href="/assets/index.html-8d977631.js" as="script"><link rel="prefetch" href="/assets/index.html-bb4639ce.js" as="script"><link rel="prefetch" href="/assets/index.html-2daeac95.js" as="script"><link rel="prefetch" href="/assets/index.html-4f860884.js" as="script"><link rel="prefetch" href="/assets/index.html-6672d33d.js" as="script"><link rel="prefetch" href="/assets/index.html-e66fda64.js" as="script"><link rel="prefetch" href="/assets/index.html-c303c772.js" as="script"><link rel="prefetch" href="/assets/index.html-50018e99.js" as="script"><link rel="prefetch" href="/assets/index.html-7e7f7e22.js" as="script"><link rel="prefetch" href="/assets/index.html-df94e079.js" as="script"><link rel="prefetch" href="/assets/index.html-c51cf5a6.js" as="script"><link rel="prefetch" href="/assets/index.html-60e51594.js" as="script"><link rel="prefetch" href="/assets/index.html-06f1385e.js" as="script"><link rel="prefetch" href="/assets/index.html-7448705b.js" as="script"><link rel="prefetch" href="/assets/index.html-d43d6abd.js" as="script"><link rel="prefetch" href="/assets/index.html-14cc0868.js" as="script"><link rel="prefetch" href="/assets/index.html-02c57081.js" as="script"><link rel="prefetch" href="/assets/index.html-f4558cf8.js" as="script"><link rel="prefetch" href="/assets/index.html-7a7b5de9.js" as="script"><link rel="prefetch" href="/assets/index.html-d9b3200b.js" as="script"><link rel="prefetch" href="/assets/index.html-04a327f7.js" as="script"><link rel="prefetch" href="/assets/index.html-aaddcfbf.js" as="script"><link rel="prefetch" href="/assets/index.html-30853592.js" as="script"><link rel="prefetch" href="/assets/index.html-4afd33d4.js" as="script"><link rel="prefetch" href="/assets/index.html-b43ba0f7.js" as="script"><link rel="prefetch" href="/assets/index.html-00a3cd7d.js" as="script"><link rel="prefetch" href="/assets/index.html-52dc4a35.js" as="script"><link rel="prefetch" href="/assets/index.html-488100f3.js" as="script"><link rel="prefetch" href="/assets/index.html-c53c8ca3.js" as="script"><link rel="prefetch" href="/assets/index.html-e85a41f6.js" as="script"><link rel="prefetch" href="/assets/index.html-ba6902b1.js" as="script"><link rel="prefetch" href="/assets/index.html-6961317a.js" as="script"><link rel="prefetch" href="/assets/index.html-b4d8eb3d.js" as="script"><link rel="prefetch" href="/assets/åˆ†å¸ƒå¼äº‹åŠ¡ç»„ä»¶Seata.html-898a92aa.js" as="script"><link rel="prefetch" href="/assets/index.html-5c426c9c.js" as="script"><link rel="prefetch" href="/assets/index.html-0748344f.js" as="script"><link rel="prefetch" href="/assets/index.html-b65b5773.js" as="script"><link rel="prefetch" href="/assets/index.html-e2861395.js" as="script"><link rel="prefetch" href="/assets/index.html-9b02ee5f.js" as="script"><link rel="prefetch" href="/assets/index.html-99f50e4a.js" as="script"><link rel="prefetch" href="/assets/index.html-afbe62b6.js" as="script"><link rel="prefetch" href="/assets/index.html-072ecb17.js" as="script"><link rel="prefetch" href="/assets/index.html-2cb8c4c9.js" as="script"><link rel="prefetch" href="/assets/02.RocketMQå¼€å‘æ¨¡å‹ä¸ç”Ÿäº§ç¯å¢ƒé—®é¢˜å‰–æ.html-123b3c01.js" as="script"><link rel="prefetch" href="/assets/404.html-674fba9b.js" as="script"><link rel="prefetch" href="/assets/index.html-00536d18.js" as="script"><link rel="prefetch" href="/assets/index.html-03b902c7.js" as="script"><link rel="prefetch" href="/assets/index.html-2429bdfb.js" as="script"><link rel="prefetch" href="/assets/index.html-06d1dbab.js" as="script"><link rel="prefetch" href="/assets/index.html-0d0e09cc.js" as="script"><link rel="prefetch" href="/assets/index.html-8759e5fb.js" as="script"><link rel="prefetch" href="/assets/index.html-91172372.js" as="script"><link rel="prefetch" href="/assets/index.html-6599cbc3.js" as="script"><link rel="prefetch" href="/assets/index.html-a58f5767.js" as="script"><link rel="prefetch" href="/assets/index.html-1b797ab6.js" as="script"><link rel="prefetch" href="/assets/index.html-0f8c8ddc.js" as="script"><link rel="prefetch" href="/assets/index.html-e9bda0c4.js" as="script"><link rel="prefetch" href="/assets/index.html-c8a44035.js" as="script"><link rel="prefetch" href="/assets/index.html-ce4cfbbc.js" as="script"><link rel="prefetch" href="/assets/index.html-656ade32.js" as="script"><link rel="prefetch" href="/assets/index.html-06a9687b.js" as="script"><link rel="prefetch" href="/assets/index.html-88067b63.js" as="script"><link rel="prefetch" href="/assets/index.html-cddd233c.js" as="script"><link rel="prefetch" href="/assets/index.html-e33c43c7.js" as="script"><link rel="prefetch" href="/assets/index.html-179fbbb4.js" as="script"><link rel="prefetch" href="/assets/index.html-3257904d.js" as="script"><link rel="prefetch" href="/assets/index.html-bd4a7aa4.js" as="script"><link rel="prefetch" href="/assets/index.html-350a3bf9.js" as="script"><link rel="prefetch" href="/assets/index.html-5a0cea13.js" as="script"><link rel="prefetch" href="/assets/index.html-c7b6231a.js" as="script"><link rel="prefetch" href="/assets/index.html-25092415.js" as="script"><link rel="prefetch" href="/assets/index.html-95ca6ee5.js" as="script"><link rel="prefetch" href="/assets/index.html-7c78757b.js" as="script"><link rel="prefetch" href="/assets/index.html-33c49ab5.js" as="script"><link rel="prefetch" href="/assets/index.html-cb9e0d0e.js" as="script"><link rel="prefetch" href="/assets/index.html-524251fd.js" as="script"><link rel="prefetch" href="/assets/index.html-3da8edc6.js" as="script"><link rel="prefetch" href="/assets/index.html-f3dc57a7.js" as="script"><link rel="prefetch" href="/assets/index.html-3c4992f2.js" as="script"><link rel="prefetch" href="/assets/index.html-777879b1.js" as="script"><link rel="prefetch" href="/assets/index.html-6ac2cbeb.js" as="script"><link rel="prefetch" href="/assets/index.html-112eed93.js" as="script"><link rel="prefetch" href="/assets/index.html-c326d17b.js" as="script"><link rel="prefetch" href="/assets/index.html-6b1c27b7.js" as="script"><link rel="prefetch" href="/assets/index.html-f8320d44.js" as="script"><link rel="prefetch" href="/assets/index.html-f3495400.js" as="script"><link rel="prefetch" href="/assets/giscus-765fdce2.js" as="script"><link rel="prefetch" href="/assets/auto-bce451fc.js" as="script"><link rel="prefetch" href="/assets/index-a49a0f47.js" as="script"><link rel="prefetch" href="/assets/flowchart-d65a1d8e.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-b4b1a5e7.js" as="script"><link rel="prefetch" href="/assets/highlight.esm-75b11b9d.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-0191f9da.js" as="script"><link rel="prefetch" href="/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/assets/notes.esm-a106bb2c.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-ec5549c1.js" as="script"><link rel="prefetch" href="/assets/search.esm-7e6792e2.js" as="script"><link rel="prefetch" href="/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/assets/VuePlayground-3d35f30a.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-5794cde2.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container no-sidebar has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button type="button" class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a href="/" class="brand"><img class="logo" src="/logo.svg" alt="å­¦ä¹ ç¬”è®°"><!----><span class="site-name hide-in-pad">å­¦ä¹ ç¬”è®°</span></a><!--]--><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><!--[--><!----><!--]--><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!--[--><!----><!----><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">æ±Ÿ</span></span><span property="author" content="æ±Ÿ"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2022-11-20T14:33:33.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 14 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT14M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item category6 clickable" role="navigation">å¹¶å‘ç¼–ç¨‹</span><!--]--><meta property="articleSection" content="å¹¶å‘ç¼–ç¨‹"></span><!----></div><hr></div><!----><!----><div class="theme-hope-content"><h1 id="è¿›ç¨‹é—´é€šä¿¡-ipc" tabindex="-1"><a class="header-anchor" href="#è¿›ç¨‹é—´é€šä¿¡-ipc" aria-hidden="true">#</a> è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ï¼š</h1><p>è¿›ç¨‹é—´é€šä¿¡çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œè¿™é‡Œä¸»è¦è®²åˆ°è¿›ç¨‹é—´é€šä¿¡çš„å…­ç§æ–¹å¼ï¼Œåˆ†åˆ«ä¸ºï¼šç®¡é“ã€FIFOã€æ¶ˆæ¯é˜Ÿåˆ—ã€å…±äº«å†…å­˜ã€ä¿¡å·ã€ä¿¡å·é‡ã€‚</p><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://blog.csdn.net/qq_34343254/article/details/107431229" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/qq_34343254/article/details/107431229<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h1 id="ä¸€ã€ç®¡é“" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€ç®¡é“" aria-hidden="true">#</a> ä¸€ã€ç®¡é“</h1><p>ç®¡é“çš„ç‰¹ç‚¹ï¼š</p><p>æ˜¯ä¸€ç§åŠåŒå·¥çš„é€šä¿¡æ–¹å¼ï¼›åªèƒ½åœ¨å…·æœ‰äº²ç¼˜å…³ç³»çš„è¿›ç¨‹é—´ä½¿ç”¨. è¿›ç¨‹çš„äº²ç¼˜å…³ç³»ä¸€èˆ¬æŒ‡çš„æ˜¯çˆ¶å­å…³ç³»ï¼›å®ƒå¯ä»¥çœ‹æˆæ˜¯ä¸€ç§ç‰¹æ®Šçš„æ–‡ä»¶ï¼Œå¯¹äºå®ƒçš„è¯»å†™ä¹Ÿå¯ä»¥ä½¿ç”¨æ™®é€šçš„ readã€write ç­‰å‡½æ•°ã€‚ä½†æ˜¯å®ƒä¸æ˜¯æ™®é€šçš„æ–‡ä»¶ï¼Œå¹¶ä¸å±äºå…¶ä»–ä»»ä½•æ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶ä¸”åªå­˜åœ¨äºå†…å­˜ä¸­ã€‚</p><p>ç®¡é“çš„åŸå‹ï¼š</p><p>#include &lt;unistd.h&gt;</p><p>int pipe(int pipefd[2]);</p><p>ä»£ç å®ç°ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>#include &lt;stdio.h&gt;
#include &lt;unistd.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
 
/*ä½¿ç”¨åŒ¿åç®¡é“å®ç°è¿›ç¨‹é—´é€šä¿¡*/
int main()
{
        int fd[2];//fd[0]ä¸ºè¯»ç«¯ fd[1]ä¸ºå†™ç«¯
        pid_t pid;
        char buf[128];
        //int pipe(int pipefd[2]);
        if(pipe(fd) == -1)//åˆ›å»ºç®¡é“
        {
                printf(&quot;ç®¡é“åˆ›å»ºå¤±è´¥\n&quot;);
                perror(&quot;why&quot;);
        }
 
        pid = fork();
 
        if(pid &lt; 0 )
        {
                printf(&quot;å­è¿›ç¨‹å¼€è¾Ÿå¤±è´¥\n&quot;);
                perror(&quot;why&quot;);
        }else if(pid &gt; 0){
 
                sleep(3);//è®©å­è¿›ç¨‹å…ˆæ‰§è¡Œ
                printf(&quot;è¿™æ˜¯ä¸€ä¸ªçˆ¶è¿›ç¨‹\n&quot;);//çˆ¶è¿›ç¨‹å®Œæˆå†™æ“ä½œ
                close(fd[0]);
                write(fd[1],&quot;hello from father&quot;,strlen(&quot;hello from father&quot;));
        }else{
 
                printf(&quot;è¿™æ˜¯ä¸€ä¸ªå­è¿›ç¨‹\n&quot;);//å­è¿›ç¨‹å®Œæˆè¯»æ“ä½œ
                close(fd[1]);
                read(fd[0],buf,sizeof(buf));//æ²¡æœ‰æ•°æ®æ¥æ—¶ï¼Œé˜»å¡åœ¨è¿™
                printf(&quot;buf = %s\n&quot;,buf);
        }
 
        return 0;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="äºŒã€fifo" tabindex="-1"><a class="header-anchor" href="#äºŒã€fifo" aria-hidden="true">#</a> äºŒã€FIFO</h1><p>FIFOï¼Œä¹Ÿå«åšå‘½åç®¡é“ï¼Œå®ƒæ˜¯ä¸€ç§æ–‡ä»¶ç±»å‹ã€‚</p><p>FIFO çš„ç‰¹ç‚¹ï¼š</p><p>FIFO å¯ä»¥åœ¨æ— å…³çš„è¿›ç¨‹ä¹‹é—´äº¤æ¢æ•°æ®ï¼Œä¸æ— åç®¡é“ä¸åŒï¼›FIFO æœ‰è·¯å¾„åä¸ä¹‹ç›¸å…³è”ï¼Œå®ƒä»¥ä¸€ç§ç‰¹æ®Šè®¾å¤‡æ–‡ä»¶å½¢å¼å­˜åœ¨äºæ–‡ä»¶ç³»ç»Ÿä¸­ã€‚</p><p>FIFO çš„åŸå‹ï¼š</p><p>#include &lt;sys/types.h&gt;</p><p>#include &lt;sys/stat.h&gt;</p><p>int mkfifo(const char *pathname, mode_t mode);</p><p>å…¶ä¸­çš„ mode å‚æ•°ä¸ open å‡½æ•°ä¸­çš„ mode ç›¸åŒã€‚ä¸€æ—¦åˆ›å»ºäº†ä¸€ä¸ª FIFOï¼Œå°±å¯ä»¥ç”¨ä¸€èˆ¬çš„æ–‡ä»¶ I/O å‡½æ•°æ“ä½œå®ƒã€‚</p><p>å½“ open ä¸€ä¸ª FIFO æ—¶ï¼Œæ˜¯å¦è®¾ç½®éé˜»å¡æ ‡å¿—ï¼ˆO_NONBLOCKï¼‰çš„åŒºåˆ«ï¼š</p><ul><li>è‹¥æ²¡æœ‰æŒ‡å®š O_NONBLOCKï¼ˆé»˜è®¤ï¼‰ï¼Œåªè¯» open è¦é˜»å¡åˆ°æŸä¸ªå…¶ä»–è¿›ç¨‹ä¸ºå†™è€Œæ‰“å¼€æ­¤ FIFOã€‚ç±»ä¼¼çš„ï¼Œåªå†™ open è¦é˜»å¡åˆ°æŸä¸ªå…¶ä»–è¿›ç¨‹ä¸ºè¯»è€Œæ‰“å¼€å®ƒã€‚</li><li>è‹¥æŒ‡å®šäº† O_NONBLOCKï¼Œåˆ™åªè¯» open ç«‹å³è¿”å›ã€‚è€Œåªå†™ open å°†å‡ºé”™è¿”å› -1 å¦‚æœæ²¡æœ‰è¿›ç¨‹å·²ç»ä¸ºè¯»è€Œæ‰“å¼€è¯¥ FIFOï¼Œå…¶ errno ç½® ENXIOã€‚</li></ul><p>ä»£ç å®ç°ï¼š</p><p>ä¸‹åˆ—ä»£ç æœ‰æ•ˆè§£å†³äº†ï¼Œå½“ç®¡é“å­˜åœ¨æ—¶ï¼Œç¨‹åºæŠ¥é”™çš„é—®é¢˜ï¼Œå‡å°‘äº†æ— å…³é”™è¯¯ä¿¡æ¯çš„æ‰“å°ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>#include &lt;stdio.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;sys/stat.h&gt;
#include &lt;errno.h&gt;
//       int mkfifo(const char *pathname, mode_t mode);
 
int main()
{
        if(mkfifo(&quot;myfifo&quot;,0600) == -1 &amp;&amp; errno != EEXIST)
        {
                printf(&quot;mkfifo failed\n&quot;);
                perror(&quot;why&quot;);
        }
 
        return 0;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>read.c</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>#include &lt;stdio.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;sys/stat.h&gt;
#include &lt;errno.h&gt;
#include &lt;fcntl.h&gt;
#include &lt;unistd.h&gt;
 
//       int mkfifo(const char *pathname, mode_t mode);
 
int main()
{
        int nread;
        char buf[30] = {&#39;\0&#39;};
 
        if(mkfifo(&quot;myfifo&quot;,0600) == -1 &amp;&amp; errno != EEXIST)//åˆ›å»ºå‘½åç®¡é“
        {
                printf(&quot;mkfifo failed\n&quot;);
                perror(&quot;why&quot;);
        }
 
        int fd = open(&quot;./myfifo&quot;,O_RDONLY);//ä»¥åªè¯»çš„å½¢å¼æ‰“å¼€ç®¡é“,ç¨‹åºé˜»å¡åœ¨è¿™ï¼Œç›´åˆ°æœ‰å¦ä¸€ä¸ªè¿›ç¨‹å¯¹å…¶æ‰§è¡Œå†™æ“ä½œ
        if(fd &lt; 0)
        {
                printf(&quot;read open failed\n&quot;);
        }else
        {
                printf(&quot;read open successn\n&quot;);
        }
 
        while(1)
        {
                nread = read(fd,buf,sizeof(buf));
                printf(&quot;read %d byte,context is:%s\n&quot;,nread,buf);
        }
 
        close(fd);
 
        return 0;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>write.c</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>#include &lt;stdio.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;sys/stat.h&gt;
#include &lt;errno.h&gt;
#include &lt;unistd.h&gt;
#include &lt;fcntl.h&gt;
#include &lt;string.h&gt;
//       int mkfifo(const char *pathname, mode_t mode);
 
int main()
{
        int nread;
        char buf[30] = &quot;message from myfifo&quot;;
 
        if(mkfifo(&quot;myfifo&quot;,0600) == -1 &amp;&amp; errno != EEXIST)//åˆ›å»ºå‘½åç®¡é“
        {
                printf(&quot;mkfifo failed\n&quot;);
                perror(&quot;why&quot;);
        }
 
        int fd = open(&quot;./myfifo&quot;,O_WRONLY);//æ‰“å¼€ç®¡é“ï¼Œç¨‹åºé˜»å¡åœ¨è¿™ï¼Œç›´åˆ°å…¶ä»–è¿›ç¨‹ä¸ºè¯»è€Œæ‰“å¼€å®ƒ
        if(fd &lt; 0)
        {
                printf(&quot;write open failed\n&quot;);
        }
        else
        {
                printf(&quot;write open success\n&quot;);
        }
 
        while(1)
        {
                sleep(1);
                write(fd,buf,strlen(buf));
        }
        close(fd);
 
        return 0;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="ä¸‰ã€æ¶ˆæ¯é˜Ÿåˆ—" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€æ¶ˆæ¯é˜Ÿåˆ—" aria-hidden="true">#</a> ä¸‰ã€æ¶ˆæ¯é˜Ÿåˆ—</h1><p>æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ˜¯æ¶ˆæ¯çš„é“¾æ¥è¡¨ï¼Œå­˜æ”¾åœ¨å†…æ ¸ä¹‹ä¸­ã€‚ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ç”±ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼ˆå³é˜Ÿåˆ— IDï¼‰æ¥æ ‡è¯†ã€‚</p><p>ç”¨æˆ·è¿›ç¨‹å¯ä»¥å‘æ¶ˆæ¯é˜Ÿåˆ—æ·»åŠ æ¶ˆæ¯ï¼Œä¹Ÿå¯ä»¥å‘æ¶ˆæ¯é˜Ÿåˆ—è¯»å–æ¶ˆæ¯ã€‚</p><p>æ¶ˆæ¯é˜Ÿåˆ—çš„ç‰¹ç‚¹ï¼š</p><p>æ¶ˆæ¯é˜Ÿåˆ—æ˜¯é¢å‘è®°å½•çš„ï¼Œå…¶ä¸­çš„æ¶ˆæ¯å…·æœ‰ç‰¹å®šçš„æ ¼å¼ä»¥åŠç‰¹å®šçš„ä¼˜å…ˆçº§ï¼›æ¶ˆæ¯é˜Ÿåˆ—æ˜¯ç‹¬ç«‹äºå‘é€å’Œæ¥æ”¶è¿›ç¨‹çš„ï¼Œè¿›ç¨‹ç»ˆæ­¢æ—¶ï¼Œæ¶ˆæ¯é˜Ÿåˆ—åŠå…¶å†…å®¹å¹¶ä¸ä¼šè¢«åˆ é™¤ï¼›æ¶ˆæ¯é˜Ÿåˆ—å¯ä»¥å®ç°æ¶ˆæ¯çš„éšæœºæŸ¥è¯¢ï¼Œæ¶ˆæ¯ä¸ä¸€å®šè¦ä»¥å…ˆè¿›å…ˆå‡ºçš„æ¬¡åºè¯»å–ï¼Œä¹Ÿå¯ä»¥æŒ‰æ¶ˆæ¯çš„ç±»å‹è¯»å–ã€‚</p><p>æ¶ˆæ¯é˜Ÿåˆ—å‡½æ•°çš„åŸå‹ï¼š</p><p>// åˆ›å»ºæˆ–æ‰“å¼€æ¶ˆæ¯é˜Ÿåˆ—ï¼šæˆåŠŸè¿”å›é˜Ÿåˆ— IDï¼Œå¤±è´¥è¿”å› - 1 int msgget(key_t key, int flag); // æ·»åŠ æ¶ˆæ¯ï¼šæˆåŠŸè¿”å› 0ï¼Œå¤±è´¥è¿”å› - 1 int msgsnd(int msqid, const void *ptr, size_t size, int flag); // è¯»å–æ¶ˆæ¯ï¼šæˆåŠŸè¿”å›æ¶ˆæ¯æ•°æ®çš„é•¿åº¦ï¼Œå¤±è´¥è¿”å› - 1 int msgrcv(int msqid, void *ptr, size_t size, long type,int flag); // æ§åˆ¶æ¶ˆæ¯é˜Ÿåˆ—ï¼šæˆåŠŸè¿”å› 0ï¼Œå¤±è´¥è¿”å› - 1 int msgctl(int msqid, int cmd, struct msqid_ds *buf);</p><p>ä»£ç æ¼”ç¤ºï¼š</p><p>msgSend.c</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>#include &lt;stdio.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;sys/ipc.h&gt;
#include &lt;sys/msg.h&gt;
#include &lt;string.h&gt;
//       int msgget(key_t key, int msgflg);
// int msgsnd(int msqid, const void *msgp, size_t msgsz, int msgflg);
 
//       ssize_t msgrcv(int msqid, void *msgp, size_t msgsz, long msgtyp,int msgflg);
struct msgbuf{
        long mtype;       /* message type, must be &gt; 0 */
        char mtext[128];    /* message data */
};
 
 
int main()
{
        struct msgbuf sendbuf={888,&quot;message from send&quot;};
        struct msgbuf readbuf;
 
        key_t key;
 
        if((key = ftok(&quot;.&quot;,&#39;z&#39;)) &lt; 0){
                printf(&quot;ftok error\n&quot;);
        }
        int msgId = msgget(key,IPC_CREAT|0777);
 
        if(msgId == -1){
                printf(&quot;get quen failed\n&quot;);
        }
 
        msgsnd(msgId,&amp;sendbuf,strlen(sendbuf.mtext),0);
        printf(&quot;send over\n&quot;);
 
        msgrcv(msgId,&amp;readbuf,sizeof(readbuf.mtext),999,0);
        printf(&quot;read from get is:%s\n&quot;,readbuf.mtext);
 
        msgctl(msgId,IPC_RMID,NULL);
 
        return 0;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>msgGet.c</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>#include &lt;stdio.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;sys/ipc.h&gt;
#include &lt;sys/msg.h&gt;
#include &lt;string.h&gt;
//       int msgget(key_t key, int msgflg);
// int msgsnd(int msqid, const void *msgp, size_t msgsz, int msgflg);
 
//       ssize_t msgrcv(int msqid, void *msgp, size_t msgsz, long msgtyp,int msgflg);
struct msgbuf{
        long mtype;       /* message type, must be &gt; 0 */
        char mtext[128];    /* message data */
};
 
int main()
{
        struct msgbuf readbuf;
        memset(readbuf.mtext, &#39;\0&#39;, sizeof(readbuf.mtext));
        struct msgbuf sendbuf={999,&quot;thank for your reach&quot;};
 
        key_t key;
 
        //è·å–keyå€¼
        if((key = ftok(&quot;.&quot;,&#39;z&#39;)) &lt; 0){
                printf(&quot;ftok error\n&quot;);
        }
 
        int msgId = msgget(key,IPC_CREAT|0777);
 
        if(msgId == -1){
                printf(&quot;get quen failed\n&quot;);
                perror(&quot;why&quot;);
        }
 
        msgrcv(msgId,&amp;readbuf,sizeof(readbuf.mtext),888,0);
        printf(&quot;read from send is:%s\n&quot;,readbuf.mtext);
 
        msgsnd(msgId,&amp;sendbuf,strlen(sendbuf.mtext),0);
 
        msgctl(msgId,IPC_RMID,NULL);
 
        return 0;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="å››ã€å…±äº«å†…å­˜" tabindex="-1"><a class="header-anchor" href="#å››ã€å…±äº«å†…å­˜" aria-hidden="true">#</a> å››ã€å…±äº«å†…å­˜</h1><p>å…±äº«å†…å­˜ï¼ŒæŒ‡ä¸¤ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹å…±äº«ä¸€ä¸ªç»™å®šçš„å­˜å‚¨åŒºã€‚</p><p>ipcs -m æŸ¥çœ‹ç³»ç»Ÿä¸‹å·²æœ‰çš„å…±äº«å†…å­˜ï¼›ipcrm -m shmid å¯ä»¥ç”¨æ¥åˆ é™¤å…±äº«å†…å­˜ã€‚</p><p>å…±äº«å†…å­˜çš„ç‰¹ç‚¹ï¼š</p><p>å…±äº«å†…å­˜æ˜¯æœ€å¿«çš„ä¸€ç§ IPCï¼Œå› ä¸ºè¿›ç¨‹æ˜¯ç›´æ¥å¯¹å†…å­˜è¿›è¡Œå­˜å–ã€‚å› ä¸ºå¤šä¸ªè¿›ç¨‹å¯ä»¥åŒæ—¶æ“ä½œï¼Œæ‰€ä»¥éœ€è¦è¿›è¡ŒåŒæ­¥ã€‚ä¿¡å·é‡ + å…±äº«å†…å­˜é€šå¸¸ç»“åˆåœ¨ä¸€èµ·ä½¿ç”¨ï¼Œä¿¡å·é‡ç”¨æ¥åŒæ­¥å¯¹å…±äº«å†…å­˜çš„è®¿é—®ã€‚</p><p>å…±äº«å†…å­˜å‡½æ•°çš„åŸå‹ï¼š</p><p>// åˆ›å»ºæˆ–è·å–ä¸€ä¸ªå…±äº«å†…å­˜ï¼šæˆåŠŸè¿”å›å…±äº«å†…å­˜ IDï¼Œå¤±è´¥è¿”å› - 1 int shmget(key_t key, size_t size, int flag); // è¿æ¥å…±äº«å†…å­˜åˆ°å½“å‰è¿›ç¨‹çš„åœ°å€ç©ºé—´ï¼šæˆåŠŸè¿”å›æŒ‡å‘å…±äº«å†…å­˜çš„æŒ‡é’ˆï¼Œå¤±è´¥è¿”å› - 1 void *shmat(int shm_id, const void *addr, int flag); // æ–­å¼€ä¸å…±äº«å†…å­˜çš„è¿æ¥ï¼šæˆåŠŸè¿”å› 0ï¼Œå¤±è´¥è¿”å› - 1 int shmdt(void *addr); // æ§åˆ¶å…±äº«å†…å­˜çš„ç›¸å…³ä¿¡æ¯ï¼šæˆåŠŸè¿”å› 0ï¼Œå¤±è´¥è¿”å› - 1 int shmctl(int shm_id, int cmd, struct shmid_ds *buf);</p><p>ä»£ç æ¼”ç¤ºï¼š</p><p>shmw.c</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;
#include &lt;sys/ipc.h&gt;
#include &lt;sys/shm.h&gt;
 
//       int shmget(key_t key, size_t size, int shmflg);
// void *shmat(int shmid, const void *shmaddr, int shmflg);
 
//       int shmdt(const void *shmaddr);
 
int main()
{
        int shmId;
        key_t key;
        char *shmaddr;
 
        if((key = ftok(&quot;.&quot;,1)) &lt; 0){
                printf(&quot;ftok error\n&quot;);
        }
 
        shmId = shmget(key, 1024*4, IPC_CREAT|0666);//å†…å­˜å¤§å°å¿…é¡»å¾—æ˜¯MBçš„æ•´æ•°å€
 
        if(shmId == -1){
                printf(&quot;shmget error\n&quot;);
                exit(-1);
        }
 
        /*ç¬¬äºŒä¸ªå‚æ•°ä¸€èˆ¬å†™0ï¼Œè®©linuxå†…æ ¸è‡ªåŠ¨åˆ†é…ç©ºé—´ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¹Ÿä¸€èˆ¬å†™0ï¼Œè¡¨ç¤ºå¯è¯»å¯å†™*/
        shmaddr = shmat(shmId, 0, 0);
        printf(&quot;shmat OK\n&quot;);
        strcpy(shmaddr,&quot;I am so cool&quot;);
 
        sleep(5);//ç­‰å¾…5ç§’ï¼Œè®©åˆ«çš„è¿›ç¨‹å»è¯»
 
        shmdt(shmaddr);
        shmctl(shmId, IPC_RMID, 0);//å†™0è¡¨ç¤ºä¸å…³å¿ƒ
        printf(&quot;quit\n&quot;);
 
        return 0;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>shmr.c</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;sys/ipc.h&gt;
#include &lt;sys/shm.h&gt;
 
//       int shmget(key_t key, size_t size, int shmflg);
// void *shmat(int shmid, const void *shmaddr, int shmflg);
 
//       int shmdt(const void *shmaddr);
 
int main()
{
        int shmId;
        key_t key;
        char *shmaddr;
 
        if((key = ftok(&quot;.&quot;,1)) &lt; 0){
                printf(&quot;ftok error\n&quot;);
        }
 
        shmId = shmget(key, 1024*4, 0);//å†…å­˜å¤§å°å¿…é¡»å¾—æ˜¯MBçš„æ•´æ•°å€
 
        if(shmId == -1){
                printf(&quot;shmget error\n&quot;);
                exit(-1);
        }
 
        /*ç¬¬äºŒä¸ªå‚æ•°ä¸€èˆ¬å†™0ï¼Œè®©linuxå†…æ ¸è‡ªåŠ¨åˆ†é…ç©ºé—´ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¹Ÿä¸€èˆ¬å†™0ï¼Œè¡¨ç¤ºå¯è¯»å¯å†™*/
        shmaddr = shmat(shmId, 0, 0);
        printf(&quot;shmat OK\n&quot;);
        printf(&quot;data : %s\n&quot;,shmaddr);
 
        shmdt(shmaddr);
 
        return 0;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="äº”ã€ä¿¡å·" tabindex="-1"><a class="header-anchor" href="#äº”ã€ä¿¡å·" aria-hidden="true">#</a> äº”ã€ä¿¡å·</h1><p>å¯¹äº Linux æ¥è¯´ï¼Œå®é™…ä¿¡å·æ˜¯è½¯ä¸­æ–­ï¼Œè®¸å¤šé‡è¦çš„ç¨‹åºéƒ½éœ€è¦å¤„ç†ä¿¡å·ã€‚ç»ˆç«¯ç”¨æˆ·è¾“å…¥äº† ctrl+c æ¥ä¸­æ–­ç¨‹åºï¼Œä¼šé€šè¿‡ä¿¡å·æœºåˆ¶åœæ­¢ä¸€ä¸ªç¨‹åºã€‚</p><p>ä¿¡å·çš„ç›¸å…³æ¦‚è¿°ï¼š</p><p>1ã€ä¿¡å·çš„åå­—å’Œç¼–å·ï¼š</p><p>æ¯ä¸ªä¿¡å·éƒ½æœ‰ä¸€ä¸ªåå­—å’Œç¼–å·ï¼Œè¿™äº›åå­—éƒ½ä»¥ â€œSIGâ€ å¼€å¤´ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ kill -l æ¥æŸ¥çœ‹ä¿¡å·çš„åå­—ä»¥åŠåºå·ã€‚</p><figure><img src="https://img.jssjqd.cn/202305261749289.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ä¸å­˜åœ¨ 0 ä¿¡å·ï¼Œkill å¯¹äº 0 ä¿¡å·æœ‰ç‰¹æ®Šçš„åº”ç”¨ã€‚</p><p>2ã€ä¿¡å·çš„å¤„ç†ï¼š</p><p>ä¿¡å·çš„å¤„ç†æœ‰ä¸‰ç§æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ï¼šå¿½ç•¥ã€æ•æ‰å’Œé»˜è®¤åŠ¨ä½œã€‚</p><ul><li>å¿½ç•¥ä¿¡å·ï¼Œå¤§å¤šæ•°ä¿¡å·å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹å¼æ¥å¤„ç†ï¼Œä½†æ˜¯æœ‰ä¸¤ç§ä¿¡å·ä¸èƒ½è¢«å¿½ç•¥ï¼ˆåˆ†åˆ«æ˜¯ <code>SIGKILL</code>å’Œ<code>SIGSTOP</code>ï¼‰ï¼›</li><li>æ•æ‰ä¿¡å·ï¼Œéœ€è¦å‘Šè¯‰å†…æ ¸ï¼Œç”¨æˆ·å¸Œæœ›å¦‚ä½•å¤„ç†æŸä¸€ç§ä¿¡å·ï¼Œè¯´ç™½äº†å°±æ˜¯å†™ä¸€ä¸ªä¿¡å·å¤„ç†å‡½æ•°ï¼Œç„¶åå°†è¿™ä¸ªå‡½æ•°å‘Šè¯‰å†…æ ¸ã€‚å½“è¯¥ä¿¡å·äº§ç”Ÿæ—¶ï¼Œç”±å†…æ ¸æ¥è°ƒç”¨ç”¨æˆ·è‡ªå®šä¹‰çš„å‡½æ•°ï¼Œä»¥æ­¤æ¥å®ç°æŸç§ä¿¡å·çš„å¤„ç†ã€‚</li><li>ç³»ç»Ÿé»˜è®¤åŠ¨ä½œï¼Œå¯¹äºæ¯ä¸ªä¿¡å·æ¥è¯´ï¼Œç³»ç»Ÿéƒ½å¯¹åº”ç”±é»˜è®¤çš„å¤„ç†åŠ¨ä½œï¼Œå½“å‘ç”Ÿäº†è¯¥ä¿¡å·ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ‰§è¡Œã€‚å…·ä½“çš„ä¿¡å·é»˜è®¤åŠ¨ä½œå¯ä»¥ä½¿ç”¨<code>man 7 signal</code>æ¥æŸ¥çœ‹ç³»ç»Ÿçš„å…·ä½“å®šä¹‰ã€‚</li></ul><p>ä¿¡å·å¤„ç†å‡½æ•°çš„æ³¨å†Œï¼š</p><ol><li>å…¥é—¨ç‰ˆï¼šå‡½æ•°<code>signal</code></li><li>é«˜çº§ç‰ˆï¼šå‡½æ•°<code>sigaction</code></li></ol><p>ä¿¡å·å¤„ç†å‘é€å‡½æ•°ï¼š</p><ol><li>å…¥é—¨ç‰ˆï¼škill</li><li>é«˜çº§ç‰ˆï¼šsigqueue</li></ol><p>å…¥é—¨ç‰ˆï¼š</p><p>å‡½æ•°åŸå‹ï¼š</p><p>// æ¥æ”¶å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æŒ‡å‘ä¿¡å·å¤„ç†å‡½æ•°</p><p>sighandler_t signal(int signum, sighandler_t handler);</p><p>// å‘é€å‡½æ•° int kill(pid_t pid, int sig);</p><p>æ¥æ”¶ç«¯ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>#include &lt;stdio.h&gt;
#include &lt;signal.h&gt;
 
//       typedef void (*sighandler_t)(int);
 
//       sighandler_t signal(int signum, sighandler_t handler);
/*æ¥å—åˆ°ä¿¡å·åï¼Œè®©ä¿¡å·å¤„ç†è¯¥å‡½æ•°*/
void handler(int signum)
{
        printf(&quot;signum = %d\n&quot;,signum);
 
        switch(signum){
                case 2:
                        printf(&quot;SIGINT\n&quot;);
                        break;
                case 9:
                        printf(&quot;SIGKILL\n&quot;);
                        break;
                case 10:
                        printf(&quot;SIGUSR1\n&quot;);
                        break;
        }
}
 
int main()
{
        signal(SIGINT,handler);
        signal(SIGKILL,handler);
        signal(SIGUSR1,handler);
 
        while(1);
 
        return 0;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‘é€ç«¯ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>#include &lt;stdio.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;signal.h&gt;
#include &lt;stdlib.h&gt;
 
//       int kill(pid_t pid, int sig);
 
int main(int argc,char **argv)
{
        int signum;
        int pid;
 
        signum = atoi(argv[1]);//å°†å­—ç¬¦å‹è½¬ä¸ºæ•´å‹
        pid = atoi(argv[2]);
 
        kill(pid,signum);
 
        printf(&quot;signum = %d,pid = %d\n&quot;,signum,pid);
 
        return 0;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é«˜çº§ç‰ˆï¼š</p><p>å‡½æ•°åŸå‹ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>#include &lt;signal.h&gt;
int sigaction(int signum, const struct sigaction *act, struct sigaction *oldact);
 
struct sigaction {
   void       (*sa_handler)(int); //ä¿¡å·å¤„ç†ç¨‹åºï¼Œä¸æ¥å—é¢å¤–æ•°æ®ï¼ŒSIG_IGN ä¸ºå¿½ç•¥ï¼ŒSIG_DFL ä¸ºé»˜è®¤åŠ¨ä½œ
   void       (*sa_sigaction)(int, siginfo_t *, void *); //ä¿¡å·å¤„ç†ç¨‹åºï¼Œèƒ½å¤Ÿæ¥å—é¢å¤–æ•°æ®å’Œsigqueueé…åˆä½¿ç”¨
   sigset_t   sa_mask;//é˜»å¡å…³é”®å­—çš„ä¿¡å·é›†ï¼Œå¯ä»¥å†è°ƒç”¨æ•æ‰å‡½æ•°ä¹‹å‰ï¼ŒæŠŠä¿¡å·æ·»åŠ åˆ°ä¿¡å·é˜»å¡å­—ï¼Œä¿¡å·æ•æ‰å‡½æ•°è¿”å›ä¹‹å‰æ¢å¤ä¸ºåŸå…ˆçš„å€¼ã€‚
   int        sa_flags;//å½±å“ä¿¡å·çš„è¡Œä¸ºSA_SIGINFOè¡¨ç¤ºèƒ½å¤Ÿæ¥å—æ•°æ®
 };
//å›è°ƒå‡½æ•°å¥æŸ„sa_handlerã€sa_sigactionåªèƒ½ä»»é€‰å…¶ä¸€
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬åªéœ€è¦é…ç½® sa_sigaction ä»¥åŠ sa_flags å³å¯ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>siginfo_t {
               int      si_signo;    /* Signal number */
               int      si_errno;    /* An errno value */
               int      si_code;     /* Signal code */
               int      si_trapno;   /* Trap number that caused
                                        hardware-generated signal
                                        (unused on most architectures) */
               pid_t    si_pid;      /* Sending process ID */
               uid_t    si_uid;      /* Real user ID of sending process */
               int      si_status;   /* Exit value or signal */
               clock_t  si_utime;    /* User time consumed */
               clock_t  si_stime;    /* System time consumed */
               sigval_t si_value;    /* Signal value */
               int      si_int;      /* POSIX.1b signal */
               void    *si_ptr;      /* POSIX.1b signal */
               int      si_overrun;  /* Timer overrun count; POSIX.1b timers */
               int      si_timerid;  /* Timer ID; POSIX.1b timers */
               void    *si_addr;     /* Memory location which caused fault */
               int      si_band;     /* Band event */
               int      si_fd;       /* File descriptor */
}
#include &lt;signal.h&gt;
int sigqueue(pid_t pid, int sig, const union sigval value);
union sigval {
   int   sival_int;
   void *sival_ptr;
 };
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¥æ”¶ç«¯ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>#include &lt;stdio.h&gt;
#include &lt;signal.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;unistd.h&gt;
 
//       int sigaction(int signum, const struct sigaction *act,struct sigaction *oldact);
 
//(*sa_sigaction)(int, siginfo_t *, void *);
void handler(int signum, siginfo_t *info, void *context)
{
        printf(&quot;get signum is:%d\n&quot;,signum);
 
        if(context != NULL)
        {
                printf(&quot;get data = %d\n&quot;,info-&gt;si_int);
                printf(&quot;get data = %d\n&quot;,info-&gt;si_value.sival_int);
                printf(&quot;get pid is = %d\n&quot;,info-&gt;si_pid);
        }
 
}
 
int main()
{
        struct sigaction act;
        printf(&quot;pid = %d\n&quot;,getpid());
        act.sa_sigaction = handler;
        act.sa_flags = SA_SIGINFO;
 
        sigaction(SIGUSR1,&amp;act,NULL);
        while(1);
 
        return 0;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‘é€ç«¯ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>#include &lt;signal.h&gt;
#include &lt;stdio.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;unistd.h&gt;
#include &lt;stdlib.h&gt;
//       int sigqueue(pid_t pid, int sig, const union sigval value);
 
int main(int argc,char **argv)
{
        int signum;
        int pid;
 
        signum = atoi(argv[1]);
        pid = atoi(argv[2]);
 
        union sigval value;
        value.sival_int = 100;
 
        sigqueue(pid,signum,value);
        printf(&quot;pid = %d,done\n&quot;,getpid());
 
        return 0;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼šä¿¡å·å‘é€å­—ç¬¦ä¸²ï¼Œåªæœ‰åœ¨çˆ¶å­è¿›ç¨‹æˆ–è€…æ˜¯å…±äº«å†…å­˜ä¸‹æ‰å¯å‘é€ã€‚</p><h1 id="å…­ã€ä¿¡å·é‡" tabindex="-1"><a class="header-anchor" href="#å…­ã€ä¿¡å·é‡" aria-hidden="true">#</a> å…­ã€ä¿¡å·é‡</h1><p>ä¿¡å·é‡ä¸å·²ç»ä»‹ç»è¿‡çš„ IPC ç»“æ„ä¸åŒï¼Œå®ƒæ˜¯ä¸€ä¸ªè®¡æ•°å™¨ã€‚ä¿¡å·é‡ç”¨äºå®ç°è¿›ç¨‹é—´çš„äº’æ–¥ä¸åŒæ­¥ï¼Œè€Œä¸æ˜¯ç”¨äºå­˜å‚¨è¿›ç¨‹é—´é€šä¿¡æ•°æ®ã€‚</p><p>ä¿¡å·é‡çš„ç‰¹ç‚¹ï¼š</p><p>ä¿¡å·é‡ç”¨äºè¿›ç¨‹é—´åŒæ­¥ï¼Œè‹¥è¦åœ¨è¿›ç¨‹é—´ä¼ é€’æ•°æ®éœ€è¦ç»“åˆå…±äº«å†…å­˜ã€‚ä¿¡å·é‡åŸºäºæ“ä½œç³»ç»Ÿçš„ PV æ“ä½œï¼Œç¨‹åºå¯¹ä¿¡å·é‡çš„æ“ä½œéƒ½æ˜¯åŸå­æ“ä½œã€‚æ¯æ¬¡å¯¹ä¿¡å·é‡çš„ PV æ“ä½œä¸ä»…é™äºå¯¹ä¿¡å·é‡å€¼åŠ  1 æˆ–å‡ 1ï¼Œè€Œä¸”å¯ä»¥åŠ å‡ä»»æ„æ­£æ•´æ•°ã€‚æ”¯æŒä¿¡å·é‡ç»„</p><p>ä¿¡å·é‡çš„å‡½æ•°åŸå‹ï¼š</p><p>// åˆ›å»ºæˆ–è·å–ä¸€ä¸ªä¿¡å·é‡ç»„ï¼šè‹¥æˆåŠŸè¿”å›ä¿¡å·é‡é›† IDï¼Œå¤±è´¥è¿”å› - 1 int semget(key_t key, int num_sems, int sem_flags); // å¯¹ä¿¡å·é‡ç»„è¿›è¡Œæ“ä½œï¼Œæ”¹å˜ä¿¡å·é‡çš„å€¼ï¼šæˆåŠŸè¿”å› 0ï¼Œå¤±è´¥è¿”å› - 1 int semop(int semid, struct sembuf semoparray[], size_t numops);<br> // æ§åˆ¶ä¿¡å·é‡çš„ç›¸å…³ä¿¡æ¯ int semctl(int semid, int sem_num, int cmd, ...);</p><p>å½“ <code>semget</code> åˆ›å»ºæ–°çš„ä¿¡å·é‡é›†åˆæ—¶ï¼Œå¿…é¡»æŒ‡å®šé›†åˆä¸­ä¿¡å·é‡çš„ä¸ªæ•°ï¼ˆå³ <code>num_sems</code>ï¼‰ï¼Œé€šå¸¸ä¸º 1ï¼› å¦‚æœæ˜¯å¼•ç”¨ä¸€ä¸ªç°æœ‰çš„é›†åˆï¼Œåˆ™å°† <code>num_sems</code> æŒ‡å®šä¸º 0 ã€‚</p><p>åœ¨ <code>semop</code> å‡½æ•°ä¸­ï¼Œ<code>sembuf</code> ç»“æ„çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>struct sembuf 
{
    short sem_num; // ä¿¡å·é‡ç»„ä¸­å¯¹åº”çš„åºå·ï¼Œ0ï½sem_nums-1
    short sem_op;  // ä¿¡å·é‡å€¼åœ¨ä¸€æ¬¡æ“ä½œä¸­çš„æ”¹å˜é‡
    short sem_flg; // IPC_NOWAIT, SEM_UNDO
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ <code>semctl</code> å‡½æ•°ä¸­çš„å‘½ä»¤æœ‰å¤šç§ï¼Œè¿™é‡Œå°±è¯´ä¸¤ä¸ªå¸¸ç”¨çš„ï¼š</p><ul><li><code>SETVAL</code>ï¼šç”¨äºåˆå§‹åŒ–ä¿¡å·é‡ä¸ºä¸€ä¸ªå·²çŸ¥çš„å€¼ã€‚</li><li><code>IPC_RMID</code>ï¼šåˆ é™¤ä¸€ä¸ªä¿¡å·é‡é›†åˆã€‚å¦‚æœä¸åˆ é™¤ä¿¡å·é‡ï¼Œå®ƒå°†ç»§ç»­åœ¨ç³»ç»Ÿä¸­å­˜åœ¨ï¼Œå³ä½¿ç¨‹åºå·²ç»é€€å‡ºï¼Œå®ƒå¯èƒ½åœ¨ä½ ä¸‹æ¬¡è¿è¡Œæ­¤ç¨‹åºæ—¶å¼•å‘é—®é¢˜ï¼Œè€Œä¸”ä¿¡å·é‡æ˜¯ä¸€ç§æœ‰é™çš„èµ„æºã€‚</li></ul><p>ä»£ç æ¼”ç¤ºï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>#include &lt;stdio.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;sys/ipc.h&gt;
#include &lt;sys/sem.h&gt;
#include &lt;unistd.h&gt;
 
//       int semget(key_t key, int nsems, int semflg);
//       int semctl(int semid, int semnum, int cmd, ...);
//       int semop(int semid, struct sembuf *sops, size_t nsops);
union semun{
        int              val;    /* Value for SETVAL */
        struct semid_ds *buf;    /* Buffer for IPC_STAT, IPC_SET */
        unsigned short  *array;  /* Array for GETALL, SETALL */
        struct seminfo  *__buf;  /* Buffer for IPC_INFO
                                    (Linux-specific) */
};
 
//Pæ“ä½œï¼Œæ‹¿é’¥åŒ™
void PGetKey(int semid)
{
        struct sembuf sops;
        sops.sem_num = 0;
        sops.sem_op = -1;
        sops.sem_flg = SEM_UNDO;
 
        semop(semid, &amp;sops, 1);
}
 
//Væ“ä½œï¼Œæ”¾å›é’¥åŒ™
void VPutBackKey(int semid)
{
        struct sembuf sops;
        sops.sem_num = 0;
        sops.sem_op = 1;
        sops.sem_flg = SEM_UNDO;
 
        semop(semid, &amp;sops, 1);
}
 
int main()
{
        key_t key;
        int semid;
        if((key == ftok(&quot;.&quot;,6)) &lt; 0)
        {
                printf(&quot;ftok error\n&quot;);
        }
 
        semid = semget(key , 1,  IPC_CREAT|0666);//åˆ›é€ é’¥åŒ™ï¼Œæ•°é‡ä¸º1
 
        union semun sem;
        sem.val = 0;//åˆå§‹çŠ¶æ€ä¸ºæ²¡æœ‰é’¥åŒ™
        semctl(semid, 0, SETVAL, sem);//SETVALåˆå§‹åŒ–ä¿¡å·é‡ä¸ºä¸€ä¸ªå·²çŸ¥çš„å€¼ï¼Œè¿™æ—¶å°±éœ€è¦ç¬¬å››ä¸ªå‚æ•°
                     //0è¡¨ç¤ºæ“ä½œç¬¬ä¸€æŠŠé’¥åŒ™
        int pid = fork();
 
        if(pid &lt; 0)
        {
                printf(&quot;fork failed\n&quot;);
        }else if(pid == 0)
        {
                printf(&quot;this is child\n&quot;);
                VPutBackKey(semid);//é¦–å…ˆæŠŠé’¥åŒ™æ”¾å›     
        }else
        {
                PGetKey(semid);//ç­‰å­è¿›ç¨‹å°†é’¥åŒ™æ”¾å›åæ‰ä¼šè¿›è¡Œæ“ä½œï¼Œä¿è¯å­è¿›ç¨‹å…ˆæ‰§è¡Œ
                printf(&quot;this is father\n&quot;);
                VPutBackKey(semid);
                semctl(semid, 0, IPC_RMID);//é”€æ¯é’¥åŒ™
        }
 
        return 0;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="ä¸ƒã€è¿›ç¨‹é—´é€šä¿¡æ–¹å¼æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#ä¸ƒã€è¿›ç¨‹é—´é€šä¿¡æ–¹å¼æ€»ç»“" aria-hidden="true">#</a> ä¸ƒã€è¿›ç¨‹é—´é€šä¿¡æ–¹å¼æ€»ç»“ï¼š</h1><ol><li>ç®¡é“ï¼šé€Ÿåº¦æ…¢ï¼Œå®¹é‡æœ‰é™ï¼Œåªæœ‰çˆ¶å­è¿›ç¨‹èƒ½é€šè®¯ï¼›</li><li>FIFOï¼šä»»ä½•è¿›ç¨‹é—´éƒ½èƒ½é€šè®¯ï¼Œä½†é€Ÿåº¦æ…¢ï¼›</li><li>æ¶ˆæ¯é˜Ÿåˆ—ï¼šå®¹é‡å—åˆ°ç³»ç»Ÿé™åˆ¶ï¼Œä¸”è¦æ³¨æ„ç¬¬ä¸€æ¬¡è¯»çš„æ—¶å€™ï¼Œè¦è€ƒè™‘ä¸Šä¸€æ¬¡æ²¡æœ‰è¯»å®Œæ•°æ®çš„é—®é¢˜ï¼›</li><li>å…±äº«å†…å­˜ï¼šèƒ½å¤Ÿå¾ˆå®¹æ˜“æ§åˆ¶å®¹é‡ï¼Œé€Ÿåº¦å¿«ï¼Œä½†è¦ä¿æŒåŒæ­¥ï¼Œæ¯”å¦‚ä¸€ä¸ªè¿›ç¨‹åœ¨å†™çš„æ—¶å€™ï¼Œå¦ä¸€ä¸ªè¿›ç¨‹è¦æ³¨æ„è¯»å†™çš„é—®é¢˜ï¼›</li><li>ä¿¡å·ï¼šæœ‰å…¥é—¨ç‰ˆå’Œé«˜çº§ç‰ˆä¸¤ç§ï¼ŒåŒºåˆ«åœ¨äºå…¥é—¨ç‰ˆæ³¨é‡åŠ¨ä½œï¼Œé«˜çº§ç‰ˆå¯ä»¥ä¼ é€’æ¶ˆæ¯ã€‚åªæœ‰åœ¨çˆ¶å­è¿›ç¨‹æˆ–è€…æ˜¯å…±äº«å†…å­˜ä¸­ï¼Œæ‰å¯ä»¥å‘é€å­—ç¬¦ä¸²æ¶ˆæ¯ï¼›</li><li>ä¿¡å·é‡ï¼šä¸èƒ½ä¼ é€’å¤æ‚æ¶ˆæ¯ï¼Œåªèƒ½ç”¨æ¥åŒæ­¥ã€‚ç”¨äºå®ç°è¿›ç¨‹é—´çš„äº’æ–¥ä¸åŒæ­¥ï¼Œè€Œä¸æ˜¯ç”¨äºå­˜å‚¨è¿›ç¨‹é—´é€šä¿¡æ•°æ®ã€‚</li></ol></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: thejqd@gmail.com">jiangqingdong</span><!--]--><!--]--></div></div></footer><!----><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><!----><div class="copyright">Copyright Â© 2023 æ±Ÿ</div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-f4353c56.js" defer></script>
  </body>
</html>
