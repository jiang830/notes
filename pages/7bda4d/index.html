<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.62" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://mister-hope.github.io/pages/7bda4d/"><meta property="og:site_name" content="学习笔记"><meta property="og:title" content="Docker Compose项目部署"><meta property="og:description" content="Docker Compose介绍 使用微服务架构的应用系统一般包含若干个微服务，每个微服务一般都会部署多个实例。如果每个微服务都要手动启停，那么效率之低、维护量之大可想而知。本节课将讨论如何使用 Docker Compose来轻松、高效地管理容器。为了简单起见将 Docker Compose简称为 Compose。 Compose 是一个用于定义和运行多容器的Docker应用的工具。使用Compose，你可以在一个配置文件（yaml格式）中配置你应用的服务，然后使用一个命令，即可创建并启动配置中引用的所有服务。下面我们进入Compose的实战吧"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-08-03T19:43:48.000Z"><meta property="article:author" content="江"><meta property="article:published_time" content="2022-11-10T11:14:48.000Z"><meta property="article:modified_time" content="2023-08-03T19:43:48.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Docker Compose项目部署","image":[""],"datePublished":"2022-11-10T11:14:48.000Z","dateModified":"2023-08-03T19:43:48.000Z","author":[{"@type":"Person","name":"江"}]}</script><title>Docker Compose项目部署 | 学习笔记</title><meta name="description" content="Docker Compose介绍 使用微服务架构的应用系统一般包含若干个微服务，每个微服务一般都会部署多个实例。如果每个微服务都要手动启停，那么效率之低、维护量之大可想而知。本节课将讨论如何使用 Docker Compose来轻松、高效地管理容器。为了简单起见将 Docker Compose简称为 Compose。 Compose 是一个用于定义和运行多容器的Docker应用的工具。使用Compose，你可以在一个配置文件（yaml格式）中配置你应用的服务，然后使用一个命令，即可创建并启动配置中引用的所有服务。下面我们进入Compose的实战吧">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-850a8bcc.css" as="style"><link rel="stylesheet" href="/assets/style-850a8bcc.css">
    <link rel="modulepreload" href="/assets/app-daeeb10b.js"><link rel="modulepreload" href="/assets/index.html-6d2c3ff6.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-c27b6911.js"><link rel="modulepreload" href="/assets/index.html-d8d3cf78.js"><link rel="prefetch" href="/assets/index.html-3b39e60f.js" as="script"><link rel="prefetch" href="/assets/index.html-9e90c2e2.js" as="script"><link rel="prefetch" href="/assets/index.html-45e344ee.js" as="script"><link rel="prefetch" href="/assets/index.html-03442577.js" as="script"><link rel="prefetch" href="/assets/04-Spring之Bean生命周期源码解析上.html-1cc9179a.js" as="script"><link rel="prefetch" href="/assets/index.html-8a7f046d.js" as="script"><link rel="prefetch" href="/assets/index.html-af953956.js" as="script"><link rel="prefetch" href="/assets/index.html-ca673318.js" as="script"><link rel="prefetch" href="/assets/index.html-e88b2e88.js" as="script"><link rel="prefetch" href="/assets/index.html-249e1b27.js" as="script"><link rel="prefetch" href="/assets/index.html-54432021.js" as="script"><link rel="prefetch" href="/assets/index.html-b795d556.js" as="script"><link rel="prefetch" href="/assets/index.html-3d65bbe8.js" as="script"><link rel="prefetch" href="/assets/index.html-259902cc.js" as="script"><link rel="prefetch" href="/assets/index.html-e86463d6.js" as="script"><link rel="prefetch" href="/assets/index.html-8b8f9e90.js" as="script"><link rel="prefetch" href="/assets/index.html-d3259738.js" as="script"><link rel="prefetch" href="/assets/index.html-b070450f.js" as="script"><link rel="prefetch" href="/assets/index.html-0c27c0ee.js" as="script"><link rel="prefetch" href="/assets/index.html-fa6e1905.js" as="script"><link rel="prefetch" href="/assets/index.html-e1000f19.js" as="script"><link rel="prefetch" href="/assets/index.html-9ab18d56.js" as="script"><link rel="prefetch" href="/assets/index.html-7a0565d5.js" as="script"><link rel="prefetch" href="/assets/index.html-128971ef.js" as="script"><link rel="prefetch" href="/assets/index.html-d9198d33.js" as="script"><link rel="prefetch" href="/assets/index.html-a451efae.js" as="script"><link rel="prefetch" href="/assets/index.html-f891bb3b.js" as="script"><link rel="prefetch" href="/assets/index.html-2eacdf8d.js" as="script"><link rel="prefetch" href="/assets/index.html-2059a146.js" as="script"><link rel="prefetch" href="/assets/index.html-6df6f845.js" as="script"><link rel="prefetch" href="/assets/100.高并发缓存实战.html-1e965d8d.js" as="script"><link rel="prefetch" href="/assets/index.html-5ef08b5b.js" as="script"><link rel="prefetch" href="/assets/30.微服务架构拆分实战.html-ad0d13ef.js" as="script"><link rel="prefetch" href="/assets/index.html-633b67dc.js" as="script"><link rel="prefetch" href="/assets/50.微服务网关整合OAuth2.0授权中心.html-9f6af028.js" as="script"><link rel="prefetch" href="/assets/index.html-990b0857.js" as="script"><link rel="prefetch" href="/assets/index.html-e6790597.js" as="script"><link rel="prefetch" href="/assets/index.html-b05c3859.js" as="script"><link rel="prefetch" href="/assets/index.html-e1152dc8.js" as="script"><link rel="prefetch" href="/assets/index.html-758cbc2e.js" as="script"><link rel="prefetch" href="/assets/index.html-0c12f4b5.js" as="script"><link rel="prefetch" href="/assets/index.html-ab7461ce.js" as="script"><link rel="prefetch" href="/assets/index.html-ff164e87.js" as="script"><link rel="prefetch" href="/assets/index.html-ff7b9428.js" as="script"><link rel="prefetch" href="/assets/index.html-7ec315c8.js" as="script"><link rel="prefetch" href="/assets/index.html-63e7eaca.js" as="script"><link rel="prefetch" href="/assets/index.html-a9c7426b.js" as="script"><link rel="prefetch" href="/assets/index.html-33350917.js" as="script"><link rel="prefetch" href="/assets/06.MySQL事务原理与优化最佳实践.html-62e86c64.js" as="script"><link rel="prefetch" href="/assets/index.html-0b53a3e9.js" as="script"><link rel="prefetch" href="/assets/index.html-c9dd1692.js" as="script"><link rel="prefetch" href="/assets/index.html-7db026a7.js" as="script"><link rel="prefetch" href="/assets/index.html-01a98e77.js" as="script"><link rel="prefetch" href="/assets/index.html-5200a484.js" as="script"><link rel="prefetch" href="/assets/index.html-3dd53c4e.js" as="script"><link rel="prefetch" href="/assets/index.html-9688b98a.js" as="script"><link rel="prefetch" href="/assets/index.html-83a6f2a4.js" as="script"><link rel="prefetch" href="/assets/20.ShardingJDBC源码与内核解析.html-8caf9436.js" as="script"><link rel="prefetch" href="/assets/index.html-17caf1d1.js" as="script"><link rel="prefetch" href="/assets/index.html-d08e3117.js" as="script"><link rel="prefetch" href="/assets/index.html-06811f0e.js" as="script"><link rel="prefetch" href="/assets/index.html-fe52665c.js" as="script"><link rel="prefetch" href="/assets/index.html-8819cfcc.js" as="script"><link rel="prefetch" href="/assets/index.html-612ca5ea.js" as="script"><link rel="prefetch" href="/assets/index.html-35c82a9b.js" as="script"><link rel="prefetch" href="/assets/index.html-3bbc6a7c.js" as="script"><link rel="prefetch" href="/assets/index.html-10d5f93f.js" as="script"><link rel="prefetch" href="/assets/index.html-daa79fe7.js" as="script"><link rel="prefetch" href="/assets/index.html-1c0b0270.js" as="script"><link rel="prefetch" href="/assets/index.html-c737450b.js" as="script"><link rel="prefetch" href="/assets/index.html-2881fc65.js" as="script"><link rel="prefetch" href="/assets/index.html-8ede660d.js" as="script"><link rel="prefetch" href="/assets/index.html-bfc5aa88.js" as="script"><link rel="prefetch" href="/assets/index.html-dc0b39c0.js" as="script"><link rel="prefetch" href="/assets/index.html-969d8760.js" as="script"><link rel="prefetch" href="/assets/index.html-a1ecf52d.js" as="script"><link rel="prefetch" href="/assets/index.html-797dd2b4.js" as="script"><link rel="prefetch" href="/assets/index.html-69fe6806.js" as="script"><link rel="prefetch" href="/assets/index.html-81cf1122.js" as="script"><link rel="prefetch" href="/assets/index.html-b9ae94af.js" as="script"><link rel="prefetch" href="/assets/index.html-235365a4.js" as="script"><link rel="prefetch" href="/assets/index.html-5699e4de.js" as="script"><link rel="prefetch" href="/assets/index.html-bc8b8dac.js" as="script"><link rel="prefetch" href="/assets/index.html-ada88bc6.js" as="script"><link rel="prefetch" href="/assets/index.html-e31f9b53.js" as="script"><link rel="prefetch" href="/assets/index.html-c57de051.js" as="script"><link rel="prefetch" href="/assets/index.html-40526ae8.js" as="script"><link rel="prefetch" href="/assets/index.html-a08a6826.js" as="script"><link rel="prefetch" href="/assets/index.html-d30017ff.js" as="script"><link rel="prefetch" href="/assets/index.html-f4ebf0f6.js" as="script"><link rel="prefetch" href="/assets/index.html-a17ba863.js" as="script"><link rel="prefetch" href="/assets/index.html-4c044b37.js" as="script"><link rel="prefetch" href="/assets/index.html-a570e1b0.js" as="script"><link rel="prefetch" href="/assets/index.html-b61409a3.js" as="script"><link rel="prefetch" href="/assets/index.html-82c58069.js" as="script"><link rel="prefetch" href="/assets/index.html-426f72dc.js" as="script"><link rel="prefetch" href="/assets/index.html-a0bb89d8.js" as="script"><link rel="prefetch" href="/assets/index.html-a9a678a7.js" as="script"><link rel="prefetch" href="/assets/index.html-83a226d6.js" as="script"><link rel="prefetch" href="/assets/index.html-d7933b56.js" as="script"><link rel="prefetch" href="/assets/index.html-319cb58d.js" as="script"><link rel="prefetch" href="/assets/index.html-122b3a8d.js" as="script"><link rel="prefetch" href="/assets/index.html-b518981f.js" as="script"><link rel="prefetch" href="/assets/index.html-4ffa0bce.js" as="script"><link rel="prefetch" href="/assets/index.html-98993771.js" as="script"><link rel="prefetch" href="/assets/index.html-99b4cf75.js" as="script"><link rel="prefetch" href="/assets/index.html-313e9b80.js" as="script"><link rel="prefetch" href="/assets/index.html-dd5eabde.js" as="script"><link rel="prefetch" href="/assets/分布式事务组件Seata.html-abd5be7d.js" as="script"><link rel="prefetch" href="/assets/index.html-3c3f67da.js" as="script"><link rel="prefetch" href="/assets/index.html-be315356.js" as="script"><link rel="prefetch" href="/assets/index.html-03b4651c.js" as="script"><link rel="prefetch" href="/assets/index.html-e5d64f1b.js" as="script"><link rel="prefetch" href="/assets/index.html-86195c58.js" as="script"><link rel="prefetch" href="/assets/index.html-f0cbe4ac.js" as="script"><link rel="prefetch" href="/assets/index.html-41f79acc.js" as="script"><link rel="prefetch" href="/assets/index.html-3e87a979.js" as="script"><link rel="prefetch" href="/assets/index.html-a2101f47.js" as="script"><link rel="prefetch" href="/assets/02.RocketMQ开发模型与生产环境问题剖析.html-63ae8514.js" as="script"><link rel="prefetch" href="/assets/404.html-f4f9fdbe.js" as="script"><link rel="prefetch" href="/assets/index.html-ccedd87a.js" as="script"><link rel="prefetch" href="/assets/index.html-6b635626.js" as="script"><link rel="prefetch" href="/assets/index.html-f3c1ea90.js" as="script"><link rel="prefetch" href="/assets/index.html-39a19522.js" as="script"><link rel="prefetch" href="/assets/index.html-4e6ecfce.js" as="script"><link rel="prefetch" href="/assets/index.html-c37db087.js" as="script"><link rel="prefetch" href="/assets/index.html-7f2f880b.js" as="script"><link rel="prefetch" href="/assets/index.html-f8546af5.js" as="script"><link rel="prefetch" href="/assets/index.html-36e6cb8c.js" as="script"><link rel="prefetch" href="/assets/index.html-27371869.js" as="script"><link rel="prefetch" href="/assets/index.html-4c15c6fc.js" as="script"><link rel="prefetch" href="/assets/index.html-116aca17.js" as="script"><link rel="prefetch" href="/assets/index.html-2a643c60.js" as="script"><link rel="prefetch" href="/assets/index.html-21236a9b.js" as="script"><link rel="prefetch" href="/assets/index.html-b238d9f4.js" as="script"><link rel="prefetch" href="/assets/index.html-46e55ee3.js" as="script"><link rel="prefetch" href="/assets/index.html-6d53c5d1.js" as="script"><link rel="prefetch" href="/assets/index.html-778d883e.js" as="script"><link rel="prefetch" href="/assets/index.html-d798a209.js" as="script"><link rel="prefetch" href="/assets/index.html-ab8b6fb7.js" as="script"><link rel="prefetch" href="/assets/index.html-200c9b62.js" as="script"><link rel="prefetch" href="/assets/index.html-9fa57983.js" as="script"><link rel="prefetch" href="/assets/index.html-30ef2e2b.js" as="script"><link rel="prefetch" href="/assets/index.html-2a6dfb95.js" as="script"><link rel="prefetch" href="/assets/index.html-3fd779a7.js" as="script"><link rel="prefetch" href="/assets/index.html-0118c6d9.js" as="script"><link rel="prefetch" href="/assets/index.html-942ff972.js" as="script"><link rel="prefetch" href="/assets/index.html-41b511cf.js" as="script"><link rel="prefetch" href="/assets/index.html-2be3f4a2.js" as="script"><link rel="prefetch" href="/assets/index.html-4b04c8af.js" as="script"><link rel="prefetch" href="/assets/index.html-940c35a3.js" as="script"><link rel="prefetch" href="/assets/index.html-f3f33451.js" as="script"><link rel="prefetch" href="/assets/index.html-1a8f23e9.js" as="script"><link rel="prefetch" href="/assets/index.html-c93e5cd2.js" as="script"><link rel="prefetch" href="/assets/index.html-6508b456.js" as="script"><link rel="prefetch" href="/assets/index.html-ed0506a1.js" as="script"><link rel="prefetch" href="/assets/index.html-31f68f17.js" as="script"><link rel="prefetch" href="/assets/index.html-d92890df.js" as="script"><link rel="prefetch" href="/assets/index.html-b2b41008.js" as="script"><link rel="prefetch" href="/assets/index.html-ac4c44c1.js" as="script"><link rel="prefetch" href="/assets/index.html-0ef231d8.js" as="script"><link rel="prefetch" href="/assets/index.html-4b4080eb.js" as="script"><link rel="prefetch" href="/assets/index.html-9761c57c.js" as="script"><link rel="prefetch" href="/assets/index.html-05bdeca8.js" as="script"><link rel="prefetch" href="/assets/index.html-7927333e.js" as="script"><link rel="prefetch" href="/assets/04-Spring之Bean生命周期源码解析上.html-a53413ab.js" as="script"><link rel="prefetch" href="/assets/index.html-00bdf067.js" as="script"><link rel="prefetch" href="/assets/index.html-02e52ea9.js" as="script"><link rel="prefetch" href="/assets/index.html-b122a945.js" as="script"><link rel="prefetch" href="/assets/index.html-a1e109b6.js" as="script"><link rel="prefetch" href="/assets/index.html-a54016db.js" as="script"><link rel="prefetch" href="/assets/index.html-d3a35023.js" as="script"><link rel="prefetch" href="/assets/index.html-8465051e.js" as="script"><link rel="prefetch" href="/assets/index.html-a646ecb2.js" as="script"><link rel="prefetch" href="/assets/index.html-1f87be92.js" as="script"><link rel="prefetch" href="/assets/index.html-cd2bd713.js" as="script"><link rel="prefetch" href="/assets/index.html-dba3f661.js" as="script"><link rel="prefetch" href="/assets/index.html-69da1f94.js" as="script"><link rel="prefetch" href="/assets/index.html-e19ffedd.js" as="script"><link rel="prefetch" href="/assets/index.html-ee1cf0ab.js" as="script"><link rel="prefetch" href="/assets/index.html-ce08fec6.js" as="script"><link rel="prefetch" href="/assets/index.html-85a35dc9.js" as="script"><link rel="prefetch" href="/assets/index.html-65c1badd.js" as="script"><link rel="prefetch" href="/assets/index.html-0457b750.js" as="script"><link rel="prefetch" href="/assets/index.html-dc013a8b.js" as="script"><link rel="prefetch" href="/assets/index.html-a852916c.js" as="script"><link rel="prefetch" href="/assets/index.html-5dc4cbc7.js" as="script"><link rel="prefetch" href="/assets/index.html-a3539d72.js" as="script"><link rel="prefetch" href="/assets/index.html-bb17b0c4.js" as="script"><link rel="prefetch" href="/assets/index.html-f165554f.js" as="script"><link rel="prefetch" href="/assets/index.html-5adb6774.js" as="script"><link rel="prefetch" href="/assets/100.高并发缓存实战.html-ef8e73d5.js" as="script"><link rel="prefetch" href="/assets/index.html-0a6b345a.js" as="script"><link rel="prefetch" href="/assets/30.微服务架构拆分实战.html-e5304b1d.js" as="script"><link rel="prefetch" href="/assets/index.html-396704b7.js" as="script"><link rel="prefetch" href="/assets/50.微服务网关整合OAuth2.0授权中心.html-ac2cc5e5.js" as="script"><link rel="prefetch" href="/assets/index.html-9fe7d789.js" as="script"><link rel="prefetch" href="/assets/index.html-f0384a36.js" as="script"><link rel="prefetch" href="/assets/index.html-54fb2663.js" as="script"><link rel="prefetch" href="/assets/index.html-7143f03c.js" as="script"><link rel="prefetch" href="/assets/index.html-95d93761.js" as="script"><link rel="prefetch" href="/assets/index.html-6a511c7c.js" as="script"><link rel="prefetch" href="/assets/index.html-3a8bba5d.js" as="script"><link rel="prefetch" href="/assets/index.html-00022e28.js" as="script"><link rel="prefetch" href="/assets/index.html-c03bc40d.js" as="script"><link rel="prefetch" href="/assets/index.html-301ee170.js" as="script"><link rel="prefetch" href="/assets/index.html-fd6339a0.js" as="script"><link rel="prefetch" href="/assets/index.html-a088cc4e.js" as="script"><link rel="prefetch" href="/assets/index.html-1d00cd91.js" as="script"><link rel="prefetch" href="/assets/06.MySQL事务原理与优化最佳实践.html-04dee4be.js" as="script"><link rel="prefetch" href="/assets/index.html-e7156fb0.js" as="script"><link rel="prefetch" href="/assets/index.html-c7efb90f.js" as="script"><link rel="prefetch" href="/assets/index.html-2b211f17.js" as="script"><link rel="prefetch" href="/assets/index.html-c7845d01.js" as="script"><link rel="prefetch" href="/assets/index.html-b8761b7f.js" as="script"><link rel="prefetch" href="/assets/index.html-60165d44.js" as="script"><link rel="prefetch" href="/assets/index.html-237105ed.js" as="script"><link rel="prefetch" href="/assets/index.html-d7f0df5d.js" as="script"><link rel="prefetch" href="/assets/20.ShardingJDBC源码与内核解析.html-a5b88964.js" as="script"><link rel="prefetch" href="/assets/index.html-438bff12.js" as="script"><link rel="prefetch" href="/assets/index.html-beec6f75.js" as="script"><link rel="prefetch" href="/assets/index.html-a02eef46.js" as="script"><link rel="prefetch" href="/assets/index.html-781f021e.js" as="script"><link rel="prefetch" href="/assets/index.html-5131c514.js" as="script"><link rel="prefetch" href="/assets/index.html-13bebad3.js" as="script"><link rel="prefetch" href="/assets/index.html-1b7e5bae.js" as="script"><link rel="prefetch" href="/assets/index.html-0b2914bb.js" as="script"><link rel="prefetch" href="/assets/index.html-20bca032.js" as="script"><link rel="prefetch" href="/assets/index.html-4adb1d0e.js" as="script"><link rel="prefetch" href="/assets/index.html-2da02077.js" as="script"><link rel="prefetch" href="/assets/index.html-4527c22b.js" as="script"><link rel="prefetch" href="/assets/index.html-e92916bf.js" as="script"><link rel="prefetch" href="/assets/index.html-aa6d0844.js" as="script"><link rel="prefetch" href="/assets/index.html-c5430f0f.js" as="script"><link rel="prefetch" href="/assets/index.html-872ada73.js" as="script"><link rel="prefetch" href="/assets/index.html-e1a1c7ff.js" as="script"><link rel="prefetch" href="/assets/index.html-ff7f6601.js" as="script"><link rel="prefetch" href="/assets/index.html-4dd98a05.js" as="script"><link rel="prefetch" href="/assets/index.html-3f718bdb.js" as="script"><link rel="prefetch" href="/assets/index.html-a8882079.js" as="script"><link rel="prefetch" href="/assets/index.html-cd77612a.js" as="script"><link rel="prefetch" href="/assets/index.html-9ecfc8ed.js" as="script"><link rel="prefetch" href="/assets/index.html-d8011776.js" as="script"><link rel="prefetch" href="/assets/index.html-2a528adc.js" as="script"><link rel="prefetch" href="/assets/index.html-2e10c929.js" as="script"><link rel="prefetch" href="/assets/index.html-f6ebc703.js" as="script"><link rel="prefetch" href="/assets/index.html-1dc19f5f.js" as="script"><link rel="prefetch" href="/assets/index.html-454df3f4.js" as="script"><link rel="prefetch" href="/assets/index.html-c15d1d70.js" as="script"><link rel="prefetch" href="/assets/index.html-d3a3fa27.js" as="script"><link rel="prefetch" href="/assets/index.html-66e46434.js" as="script"><link rel="prefetch" href="/assets/index.html-8f7ea9e1.js" as="script"><link rel="prefetch" href="/assets/index.html-73cad98f.js" as="script"><link rel="prefetch" href="/assets/index.html-30a2b6e8.js" as="script"><link rel="prefetch" href="/assets/index.html-cd8ac427.js" as="script"><link rel="prefetch" href="/assets/index.html-f80f238d.js" as="script"><link rel="prefetch" href="/assets/index.html-e324460e.js" as="script"><link rel="prefetch" href="/assets/index.html-9106a915.js" as="script"><link rel="prefetch" href="/assets/index.html-e62d268c.js" as="script"><link rel="prefetch" href="/assets/index.html-4de310c3.js" as="script"><link rel="prefetch" href="/assets/index.html-ab2f2886.js" as="script"><link rel="prefetch" href="/assets/index.html-29616378.js" as="script"><link rel="prefetch" href="/assets/index.html-4b95a021.js" as="script"><link rel="prefetch" href="/assets/index.html-c339ada3.js" as="script"><link rel="prefetch" href="/assets/index.html-c17f1982.js" as="script"><link rel="prefetch" href="/assets/index.html-522e7e92.js" as="script"><link rel="prefetch" href="/assets/index.html-1e55c817.js" as="script"><link rel="prefetch" href="/assets/index.html-948090a9.js" as="script"><link rel="prefetch" href="/assets/index.html-551bf489.js" as="script"><link rel="prefetch" href="/assets/分布式事务组件Seata.html-a491d26a.js" as="script"><link rel="prefetch" href="/assets/index.html-270cfc3b.js" as="script"><link rel="prefetch" href="/assets/index.html-4686d93f.js" as="script"><link rel="prefetch" href="/assets/index.html-f204e665.js" as="script"><link rel="prefetch" href="/assets/index.html-2f2964a0.js" as="script"><link rel="prefetch" href="/assets/index.html-7bb5c165.js" as="script"><link rel="prefetch" href="/assets/index.html-627fcae3.js" as="script"><link rel="prefetch" href="/assets/index.html-460a6089.js" as="script"><link rel="prefetch" href="/assets/index.html-b35b0274.js" as="script"><link rel="prefetch" href="/assets/index.html-4ab9a3d2.js" as="script"><link rel="prefetch" href="/assets/02.RocketMQ开发模型与生产环境问题剖析.html-b03d1e22.js" as="script"><link rel="prefetch" href="/assets/404.html-bdecf212.js" as="script"><link rel="prefetch" href="/assets/index.html-6a8f1533.js" as="script"><link rel="prefetch" href="/assets/index.html-2aeebb64.js" as="script"><link rel="prefetch" href="/assets/index.html-74f3d8de.js" as="script"><link rel="prefetch" href="/assets/index.html-b89e1d4f.js" as="script"><link rel="prefetch" href="/assets/index.html-e20da818.js" as="script"><link rel="prefetch" href="/assets/index.html-815c1595.js" as="script"><link rel="prefetch" href="/assets/index.html-4c2ba57e.js" as="script"><link rel="prefetch" href="/assets/index.html-33ca359d.js" as="script"><link rel="prefetch" href="/assets/index.html-6afe0279.js" as="script"><link rel="prefetch" href="/assets/index.html-fde4faac.js" as="script"><link rel="prefetch" href="/assets/index.html-ea5edf95.js" as="script"><link rel="prefetch" href="/assets/index.html-96ad5fc3.js" as="script"><link rel="prefetch" href="/assets/index.html-a0cc0d49.js" as="script"><link rel="prefetch" href="/assets/index.html-f32cfb71.js" as="script"><link rel="prefetch" href="/assets/index.html-1e603277.js" as="script"><link rel="prefetch" href="/assets/index.html-7acaf2fd.js" as="script"><link rel="prefetch" href="/assets/index.html-21d61b0d.js" as="script"><link rel="prefetch" href="/assets/index.html-1f06e3ff.js" as="script"><link rel="prefetch" href="/assets/index.html-1bf21a42.js" as="script"><link rel="prefetch" href="/assets/index.html-19a43da2.js" as="script"><link rel="prefetch" href="/assets/index.html-a141c0de.js" as="script"><link rel="prefetch" href="/assets/index.html-84b8ff80.js" as="script"><link rel="prefetch" href="/assets/index.html-d63701de.js" as="script"><link rel="prefetch" href="/assets/index.html-28f7cdf5.js" as="script"><link rel="prefetch" href="/assets/index.html-b82057ff.js" as="script"><link rel="prefetch" href="/assets/index.html-303951a6.js" as="script"><link rel="prefetch" href="/assets/index.html-94c46638.js" as="script"><link rel="prefetch" href="/assets/index.html-c917ffef.js" as="script"><link rel="prefetch" href="/assets/index.html-dcc649d9.js" as="script"><link rel="prefetch" href="/assets/index.html-2d894436.js" as="script"><link rel="prefetch" href="/assets/index.html-51a9192a.js" as="script"><link rel="prefetch" href="/assets/index.html-c3249f19.js" as="script"><link rel="prefetch" href="/assets/index.html-b44748e9.js" as="script"><link rel="prefetch" href="/assets/index.html-33ac90ae.js" as="script"><link rel="prefetch" href="/assets/index.html-56407f80.js" as="script"><link rel="prefetch" href="/assets/index.html-4172e2b9.js" as="script"><link rel="prefetch" href="/assets/index.html-244cb3bc.js" as="script"><link rel="prefetch" href="/assets/index.html-17c12236.js" as="script"><link rel="prefetch" href="/assets/index.html-b72b4a9c.js" as="script"><link rel="prefetch" href="/assets/index.html-b4a3fc5c.js" as="script"><link rel="prefetch" href="/assets/index.html-6990fe33.js" as="script"><link rel="prefetch" href="/assets/giscus-765fdce2.js" as="script"><link rel="prefetch" href="/assets/auto-bce451fc.js" as="script"><link rel="prefetch" href="/assets/index-a49a0f47.js" as="script"><link rel="prefetch" href="/assets/flowchart-d65a1d8e.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-15b8ca1a.js" as="script"><link rel="prefetch" href="/assets/highlight.esm-75b11b9d.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-0191f9da.js" as="script"><link rel="prefetch" href="/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/assets/notes.esm-a106bb2c.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-ec5549c1.js" as="script"><link rel="prefetch" href="/assets/search.esm-7e6792e2.js" as="script"><link rel="prefetch" href="/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/assets/VuePlayground-92982e42.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-5794cde2.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container no-sidebar has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button type="button" class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a href="/" class="brand"><img class="logo" src="/logo.svg" alt="学习笔记"><!----><span class="site-name hide-in-pad">学习笔记</span></a><!--]--><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><!--[--><!----><!--]--><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!--[--><!----><!----><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Docker Compose项目部署</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">江</span></span><span property="author" content="江"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2022-11-10T11:14:48.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 17 分钟</span><meta property="timeRequired" content="PT17M"></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item category4 clickable" role="navigation">Docker</span><!--]--><meta property="articleSection" content="Docker"></span><!----></div><hr></div><!----><!----><div class="theme-hope-content"><p><strong>Docker Compose介绍</strong></p><p>使用微服务架构的应用系统一般包含若干个微服务，每个微服务一般都会部署多个实例。如果每个微服务都要手动启停，那么效率之低、维护量之大可想而知。本节课将讨论如何使用 Docker Compose来轻松、高效地管理容器。为了简单起见将 Docker Compose简称为 Compose。</p><p>Compose 是一个用于定义和运行多容器的Docker应用的工具。使用Compose，你可以在一个配置文件（yaml格式）中配置你应用的服务，然后使用一个命令，即可创建并启动配置中引用的所有服务。下面我们进入Compose的实战吧</p><p><strong>Docker Compose的安装</strong></p><p>Compose的安装有多种方式，例如通过shell安装、通过pip安装、以及将compose作为容器安装等等。本文讲解通过shell安装的方式。其他安装方式如有兴趣，可以查看Docker的官方文档：<a href="https://docs.docker.com/compose/install/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/compose/install/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># docker compose安装步骤</span>
 <span class="token function">sudo</span> yum update
 <span class="token function">sudo</span> yum <span class="token function">install</span> docker-compose-plugin
 <span class="token comment"># 查看版本</span>
 <span class="token function">docker</span> compose version
 
 <span class="token function">rpm</span> <span class="token parameter variable">-e</span> <span class="token parameter variable">--nodeps</span> <span class="token variable"><span class="token variable">`</span><span class="token function">rpm</span> <span class="token parameter variable">-qa</span> <span class="token operator">|</span> <span class="token function">grep</span> docker-compose-plugin<span class="token variable">`</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Docker Compose入门示例</strong></p><p>Compose的使用非常简单，只需要编写一个docker-compose.yml，然后使用docker-compose 命令操作即可。docker-compose.yml描述了容器的配置，而docker-compose 命令描述了对容器的操作。我们首先通过一个示例快速入门：</p><p>还记得上节课，我们使用Dockerfile为项目microservice-eureka-server构建Docker镜像吗？我们还以此项目为例测试</p><ul><li>我们在microservice-eureka-server-0.0.1-SNAPSHOT.jar所在目录的上一级目录，创建docker-compose.yml 文件。</li></ul><p>目录树结构如下：</p><figure><img src="https://img.jssjqd.cn/202211101632515.png" alt="image-20221110163224784" tabindex="0" loading="lazy"><figcaption>image-20221110163224784</figcaption></figure><ul><li>然后在docker-compose.yml 中添加内容如下：</li></ul><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3.8&#39;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">eureka</span><span class="token punctuation">:</span>             <span class="token comment">#指定服务名</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> microservice<span class="token punctuation">-</span>eureka<span class="token punctuation">-</span>server<span class="token punctuation">:</span>0.0.1  <span class="token comment">#指定镜像名称</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span> ./eureka   <span class="token comment">#指定Dockfile所在路径</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;8761:8761&quot;</span>   <span class="token comment">#指定端口映射</span>
    <span class="token key atrule">expose</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token number">8761</span>          <span class="token comment">#声明容器对外暴露的端口 </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>在docker-compose.yml 所在路径执行：</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> compose up （后面加-d可以后台启动，加--build会重新构建镜像<span class="token punctuation">)</span>              
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://img.jssjqd.cn/202211101633530.png" alt="image-20221110163340129" tabindex="0" loading="lazy"><figcaption>image-20221110163340129</figcaption></figure><p>如上图，compose启动会做几件事：</p><p>1、创建一个默认的网络app_default，默认以compose所在文件目录名加&quot;_default&quot;命名，compose内的所有容器都会加入此网络，可以相互用服务名访问。</p><p>2、如果镜像 microservice-eureka-server:0.0.1 不存在先构建镜像，如果镜像存在则不构建，加上 --build 参数可以强制先构建镜像，如果镜像之前构建过且构建文件没有变化或构建的内容没有变化，就算加上 --build 参数也不会重新构建。</p><p>3、根据构建的镜像创建一个名称叫 app_eureka_1 的容器。</p><p>4、启动容器。</p><ul><li>访问：<a href="http://xn--IP-wz2c754c5qn:8761/" target="_blank" rel="noopener noreferrer">http://宿主机IP:8761/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ，发现可以正常访问eureka主页。</li></ul><p><strong>Docker Compose管理容器的结构</strong></p><p>Docker Compose将所管理的容器分为三层，<strong>分别是工程（ project），服务（service）以及容器（ container）</strong>。 Docker Compose运行目录下的所有文件（ docker-compose.yml、 extends文件或环境变量文件等）组成一个工程（默认为 docker-compose.yml所在目录的目录名称）。一个工程可包含多个服务，每个服务中定义了容器运行的镜像、参数和依赖，一个服务可包括多个容器实例。</p><p>上节示例里工程名称是 docker-compose.yml 所在的目录名。该工程包含了1个服务，服务名称是 eureka，执行 docker-compose up时，启动了eureka服务的1个容器实例。</p><p>同一个docker compose内部的容器之间可以用服务名相互访问，<strong>服务名就相当于hostname，可以直接 ping 服务名，得到的就是服务对应容器的ip，如果服务做了扩容，一个服务对应了多个容器，则 ping 服务名 会轮询访问服务对应的每台容器ip ，docker底层用了LVS等技术帮我们实现这个负载均衡</strong>。</p><p><strong>docker-compose.yml常用指令</strong></p><p><strong>image</strong></p><p>指定镜像名称或者镜像id，如果该镜像在本地不存在，Compose会尝试pull下来。</p><p>示例：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code> image: <span class="token function">java</span>              
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>build</strong></p><p>指定Dockerfile文件的路径。可以是一个路径，例如：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>build: ./dir              
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>也可以是一个对象，用以指定Dockerfile和参数，例如：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">build</span><span class="token punctuation">:</span>
  <span class="token key atrule">context</span><span class="token punctuation">:</span> ./dir
  <span class="token key atrule">dockerfile</span><span class="token punctuation">:</span> Dockerfile<span class="token punctuation">-</span>alternate
  <span class="token key atrule">args</span><span class="token punctuation">:</span>
    <span class="token key atrule">buildno</span><span class="token punctuation">:</span> <span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>command</strong></p><p>覆盖容器启动后默认执行的命令。</p><p>示例：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>command: bundle <span class="token builtin class-name">exec</span> thin <span class="token parameter variable">-p</span> <span class="token number">3000</span>              
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>也可以是一个list，类似于Dockerfile总的CMD指令，格式如下：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>command: <span class="token punctuation">[</span>bundle, exec, thin, -p, <span class="token number">3000</span><span class="token punctuation">]</span>              
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>links</strong></p><p>显示链接到其他服务中的容器。可以指定服务名称和链接的别名使用SERVICE:ALIAS 的形式，或者只指定服务名称，示例：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">web</span><span class="token punctuation">:</span>
  <span class="token key atrule">links</span><span class="token punctuation">:</span>
   <span class="token punctuation">-</span> db
   <span class="token punctuation">-</span> db<span class="token punctuation">:</span>database
   <span class="token punctuation">-</span> redis
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>external_links</strong></p><p>表示链接到docker-compose.yml外部的容器，甚至并非Compose管理的容器，特别是对于那些提供共享容器或共同服务。格式跟links类似，示例：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">external_links</span><span class="token punctuation">:</span>
 <span class="token punctuation">-</span> redis_1
 <span class="token punctuation">-</span> project_db_1<span class="token punctuation">:</span>mysql
 <span class="token punctuation">-</span> project_db_1<span class="token punctuation">:</span>postgresql          
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ports</strong></p><p>暴露端口信息。使用宿主端口:容器端口的格式，或者仅仅指定容器的端口（此时宿主机将会随机指定端口），类似于docker run -p ，示例：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">ports</span><span class="token punctuation">:</span>
 <span class="token punctuation">-</span> <span class="token string">&quot;3000&quot;</span>
 <span class="token punctuation">-</span> <span class="token string">&quot;3000-3005&quot;</span>
 <span class="token punctuation">-</span> <span class="token string">&quot;8000:8000&quot;</span>
 <span class="token punctuation">-</span> <span class="token string">&quot;9090-9091:8080-8081&quot;</span>
 <span class="token punctuation">-</span> <span class="token string">&quot;49100:22&quot;</span>
 <span class="token punctuation">-</span> <span class="token string">&quot;127.0.0.1:8001:8001&quot;</span>
 <span class="token punctuation">-</span> <span class="token string">&quot;127.0.0.1:5000-5010:5000-5010&quot;</span>        
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>expose</strong></p><p>暴露端口，只将端口暴露给连接的服务，而不暴露给宿主机，示例：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">expose</span><span class="token punctuation">:</span>
 <span class="token punctuation">-</span> <span class="token string">&quot;3000&quot;</span>
 <span class="token punctuation">-</span> <span class="token string">&quot;8000&quot;</span>            
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>volumes</strong></p><p>卷挂载路径设置。可以设置宿主机路径 （HOST:CONTAINER） 或加上访问模式 （HOST:CONTAINER:ro）。示例：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token comment"># Just specify a path and let the Engine create a volume</span>
  <span class="token punctuation">-</span> /var/lib/mysql

  <span class="token comment"># Specify an absolute path mapping</span>
  <span class="token punctuation">-</span> /opt/data<span class="token punctuation">:</span>/var/lib/mysql

  <span class="token comment"># Path on the host, relative to the Compose file</span>
  <span class="token punctuation">-</span> ./cache<span class="token punctuation">:</span>/tmp/cache

  <span class="token comment"># User-relative path</span>
  <span class="token punctuation">-</span> ~/configs<span class="token punctuation">:</span>/etc/configs/<span class="token punctuation">:</span>ro

  <span class="token comment"># Named volume</span>
  <span class="token punctuation">-</span> datavolume<span class="token punctuation">:</span>/var/lib/mysql       
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>volumes_from</strong></p><p>从另一个服务或者容器挂载卷。可以指定只读或者可读写，如果访问模式没有指定，则默认是可读写。示例：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">volumes_from</span><span class="token punctuation">:</span>
 <span class="token punctuation">-</span> service_name
 <span class="token punctuation">-</span> service_name<span class="token punctuation">:</span>ro
 <span class="token punctuation">-</span> container<span class="token punctuation">:</span>container_name
 <span class="token punctuation">-</span> container<span class="token punctuation">:</span>container_name<span class="token punctuation">:</span>rw      
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>environment</strong></p><p>设置环境变量。可以使用数组或者字典两种方式。只有一个key的环境变量可以在运行Compose的机器上找到对</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">environment</span><span class="token punctuation">:</span>
  <span class="token key atrule">RACK_ENV</span><span class="token punctuation">:</span> development
  <span class="token key atrule">SHOW</span><span class="token punctuation">:</span> <span class="token string">&#39;true&#39;</span>
  <span class="token key atrule">SESSION_SECRET</span><span class="token punctuation">:</span>

<span class="token key atrule">environment</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> RACK_ENV=development
  <span class="token punctuation">-</span> SHOW=true
  <span class="token punctuation">-</span> SESSION_SECRET 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>env_file</strong></p><p>从文件中获取环境变量，可以为单独的文件路径或列表。如果通过 docker-compose -f FILE 指定了模板文件，则 env_file 中路径会基于模板文件路径。如果有变量名称与 environment 指令冲突，则以envirment 为准。示例：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">env_file</span><span class="token punctuation">:</span> .env

<span class="token key atrule">env_file</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> ./common.env
  <span class="token punctuation">-</span> ./apps/web.env
  <span class="token punctuation">-</span> /opt/secrets.env    
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>extends</strong></p><p>继承另一个服务，基于已有的服务进行扩展。</p><p><strong>net</strong></p><p>设置网络模式。示例：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>net: &quot;bridge&quot;
net: &quot;host&quot;
net: &quot;none&quot;
net: &quot;container:[service name or container name/id]&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>dns</strong></p><p>配置dns服务器。可以是一个值，也可以是一个列表。示例：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">dns</span><span class="token punctuation">:</span> 8.8.8.8
<span class="token key atrule">dns</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> 8.8.8.8
  <span class="token punctuation">-</span> 9.9.9.9
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>dns_search</strong></p><p>配置DNS的搜索域，可以是一个值，也可以是一个列表，示例：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">dns_search</span><span class="token punctuation">:</span> example.com
<span class="token key atrule">dns_search</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> dc1.example.com
  <span class="token punctuation">-</span> dc2.example.com              
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>其他</strong></p><p>docker-compose.yml 还有很多其他命令，这里仅挑选常用命令进行讲解，其它不作赘述。如果感兴趣的，可以参考docker-compose.yml文件官方文档：<a href="https://docs.docker.com/compose/compose-file/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/compose/compose-file/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><strong>用Docker Compose编排Spring Cloud电商项目微服务</strong></p><p>如果微服务较多，则可以用docker compose来统一编排，接下来我们用docker compose来统一编排电商项目的五个微服务：tulingmall-authcenter，tulingmall-gateway，tulingmall-member，tulingmall-order，tulingmall-product</p><p><strong>编排电商项目依赖环境</strong></p><p>1、创建一个空目录docker-mall</p><p>2、在docker-mall目录下新建一个编排文件docker-compose-env.yml，内容如下：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3.8&#39;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">mysql</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span><span class="token number">5.7</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> mysql
    <span class="token key atrule">command</span><span class="token punctuation">:</span> mysqld <span class="token punctuation">-</span><span class="token punctuation">-</span>character<span class="token punctuation">-</span>set<span class="token punctuation">-</span>server=utf8mb4 <span class="token punctuation">-</span><span class="token punctuation">-</span>collation<span class="token punctuation">-</span>server=utf8mb4_unicode_ci  <span class="token comment">#覆盖容器启动后默认执行的启动mysql命令</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always  <span class="token comment">#关机或者重启机器时，docker同时重启容器，一般mysql服务可以这么设置，保持服务一直都在</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">MYSQL_ROOT_PASSWORD</span><span class="token punctuation">:</span> root <span class="token comment">#设置root帐号密码</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 3306<span class="token punctuation">:</span><span class="token number">3306</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /mydata/mysql/data/db<span class="token punctuation">:</span>/var/lib/mysql <span class="token comment">#数据文件挂载</span>
      <span class="token punctuation">-</span> /mydata/mysql/data/conf<span class="token punctuation">:</span>/etc/mysql/conf.d <span class="token comment">#配置文件挂载</span>
      <span class="token punctuation">-</span> /mydata/mysql/log<span class="token punctuation">:</span>/var/log/mysql <span class="token comment">#日志文件挂载</span>
  <span class="token key atrule">redis</span><span class="token punctuation">:</span>   
    <span class="token key atrule">image</span><span class="token punctuation">:</span> redis<span class="token punctuation">:</span><span class="token number">5.0</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> redis
    <span class="token key atrule">command</span><span class="token punctuation">:</span> redis<span class="token punctuation">-</span>server <span class="token punctuation">-</span><span class="token punctuation">-</span>appendonly yes  
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /mydata/redis/data<span class="token punctuation">:</span>/data <span class="token comment">#数据文件挂载</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 6379<span class="token punctuation">:</span><span class="token number">6379</span>
  <span class="token key atrule">rabbitmq</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> rabbitmq<span class="token punctuation">:</span>3.7.25<span class="token punctuation">-</span>management
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> rabbitmq
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /mydata/rabbitmq/data<span class="token punctuation">:</span>/var/lib/rabbitmq <span class="token comment">#数据文件挂载</span>
      <span class="token punctuation">-</span> /mydata/rabbitmq/log<span class="token punctuation">:</span>/var/log/rabbitmq <span class="token comment">#日志文件挂载</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 5672<span class="token punctuation">:</span><span class="token number">5672</span>
      <span class="token punctuation">-</span> 15672<span class="token punctuation">:</span><span class="token number">15672</span>
  <span class="token key atrule">elasticsearch</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> elasticsearch<span class="token punctuation">:</span>6.4.0
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> elasticsearch
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;cluster.name=elasticsearch&quot;</span> <span class="token comment">#设置集群名称为elasticsearch</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;discovery.type=single-node&quot;</span> <span class="token comment">#以单一节点模式启动</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;ES_JAVA_OPTS=-Xms512m -Xmx512m&quot;</span> <span class="token comment">#设置使用jvm内存大小，稍微配置大点，不然有可能启动不成功</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /mydata/elasticsearch/plugins<span class="token punctuation">:</span>/usr/share/elasticsearch/plugins <span class="token comment">#插件文件挂载</span>
      <span class="token punctuation">-</span> /mydata/elasticsearch/data<span class="token punctuation">:</span>/usr/share/elasticsearch/data <span class="token comment">#数据文件挂载</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 9200<span class="token punctuation">:</span><span class="token number">9200</span>
      <span class="token punctuation">-</span> 9300<span class="token punctuation">:</span><span class="token number">9300</span>
  <span class="token key atrule">kibana</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> kibana<span class="token punctuation">:</span>6.4.0
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> kibana
    <span class="token key atrule">links</span><span class="token punctuation">:</span>  <span class="token comment">#同一个compose文件管理的服务可以直接用服务名访问，如果要给服务取别名则可以用links实现，如下面的es就是elasticsearch服务的别名</span>
      <span class="token punctuation">-</span> elasticsearch<span class="token punctuation">:</span>es <span class="token comment">#可以用es这个域名访问elasticsearch服务</span>
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> elasticsearch <span class="token comment">#kibana在elasticsearch启动之后再启动</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;elasticsearch.hosts=http://es:9200&quot;</span> <span class="token comment">#设置访问elasticsearch的地址</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 5601<span class="token punctuation">:</span><span class="token number">5601</span>
  <span class="token key atrule">logstash</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> logstash<span class="token punctuation">:</span>6.4.0
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> logstash
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /mydata/logstash/logstash<span class="token punctuation">-</span>springboot.conf<span class="token punctuation">:</span>/usr/share/logstash/pipeline/logstash.conf <span class="token comment">#挂载logstash的配置文件，docker对单个文件的挂载需要先在宿主机建好对应文件才能挂载成功</span>
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> elasticsearch <span class="token comment">#kibana在elasticsearch启动之后再启动</span>
    <span class="token key atrule">links</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> elasticsearch<span class="token punctuation">:</span>es <span class="token comment">#可以用es这个域名访问elasticsearch服务</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 4560<span class="token punctuation">:</span><span class="token number">4560</span>
  <span class="token key atrule">mongo</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mongo<span class="token punctuation">:</span><span class="token number">3.2</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> mongo
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /mydata/mongo/db<span class="token punctuation">:</span>/data/db <span class="token comment">#数据文件挂载</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 27017<span class="token punctuation">:</span><span class="token number">27017</span>
  <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nacos/nacos<span class="token punctuation">-</span>server<span class="token punctuation">:</span>1.4.2
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> nacos
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> MODE=standalone
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /mydata/nacos/logs/<span class="token punctuation">:</span>/home/nacos/logs
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;8848:8848&quot;</span>
  <span class="token key atrule">zookeeper</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> zookeeper<span class="token punctuation">:</span><span class="token number">3.5</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 2181<span class="token punctuation">:</span><span class="token number">2181</span> 
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /mydata/zookeeper/data<span class="token punctuation">:</span>/data
      <span class="token punctuation">-</span> /mydata/zookeeper/conf<span class="token punctuation">:</span>/conf
      
  <span class="token key atrule">rocketmq</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> rocketmqinc/rocketmq
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> rocketmq
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always    
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 9876<span class="token punctuation">:</span><span class="token number">9876</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /mydata/rocketmq/logs<span class="token punctuation">:</span>/home/rocketmq/logs
      <span class="token punctuation">-</span> /mydata/rocketmq/store<span class="token punctuation">:</span>/home/rocketmq/store
    <span class="token key atrule">command</span><span class="token punctuation">:</span> sh mqnamesrv
  <span class="token key atrule">broker</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> rocketmqinc/rocketmq
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> rmqbroker
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always    
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 10909<span class="token punctuation">:</span><span class="token number">10909</span>
      <span class="token punctuation">-</span> 10911<span class="token punctuation">:</span><span class="token number">10911</span>
      <span class="token punctuation">-</span> 10912<span class="token punctuation">:</span><span class="token number">10912</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /mydata/rocketmq/logs<span class="token punctuation">:</span>/home/rocketmq/logs
      <span class="token punctuation">-</span> /mydata/rocketmq/store<span class="token punctuation">:</span>/home/rocketmq/store
      <span class="token punctuation">-</span> /mydata/rocketmq/conf/broker.conf<span class="token punctuation">:</span>/opt/rocketmq<span class="token punctuation">-</span>4.4.0/conf/broker.conf  <span class="token comment">#这个配置需要先在宿主机对应目录放好broker.conf配置文件,文件内容参考下面文档</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span> sh mqbroker <span class="token punctuation">-</span>n namesrv<span class="token punctuation">:</span>9876 <span class="token punctuation">-</span>c ../conf/broker.conf
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> rocketmq
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> JAVA_HOME=/usr/lib/jvm/jre
  <span class="token key atrule">console</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> styletang/rocketmq<span class="token punctuation">-</span>console<span class="token punctuation">-</span>ng
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> rocketmq<span class="token punctuation">-</span>console<span class="token punctuation">-</span>ng
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always    
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 8076<span class="token punctuation">:</span><span class="token number">8080</span>
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> rocketmq
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> JAVA_OPTS= <span class="token punctuation">-</span>Dlogging.level.root=info <span class="token punctuation">-</span>Drocketmq.namesrv.addr=rocketmq<span class="token punctuation">:</span><span class="token number">9876</span> 
      <span class="token punctuation">-</span> Dcom.rocketmq.sendMessageWithVIPChannel=false
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>broker.conf文件内容如下：</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">brokerName</span> <span class="token punctuation">=</span> <span class="token value attr-value">broker-a</span>
<span class="token key attr-name">brokerId</span> <span class="token punctuation">=</span> <span class="token value attr-value">0</span>
<span class="token key attr-name">deleteWhen</span> <span class="token punctuation">=</span> <span class="token value attr-value">04</span>
<span class="token key attr-name">fileReservedTime</span> <span class="token punctuation">=</span> <span class="token value attr-value">48</span>
<span class="token key attr-name">brokerRole</span> <span class="token punctuation">=</span> <span class="token value attr-value">ASYNC_MASTER</span>
<span class="token key attr-name">flushDiskType</span> <span class="token punctuation">=</span> <span class="token value attr-value">ASYNC_FLUSH</span>
<span class="token comment"># 宿主机IP</span>
<span class="token key attr-name">brokerIP1</span><span class="token punctuation">=</span><span class="token value attr-value">192.168.65.42   </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3、启动compose所有容器，在docker-mall目录执行如下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-env.yml up <span class="token parameter variable">-d</span>              
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>常用的一些docker-compose命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 查看compose内的容器</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-app.yml <span class="token function">ps</span>
<span class="token comment"># 关闭或启动或重启compose内的某个容器</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-app.yml stop/start/restart <span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span>
<span class="token comment"># 关闭或重启compose所有容器</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-app.yml stop/restart
<span class="token comment"># 查看compose所有容器的运行日志</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-app.yml logs <span class="token parameter variable">-f</span>
<span class="token comment"># 查看compose下某个容器的运行日志</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-app.yml logs <span class="token parameter variable">-f</span> <span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span>
<span class="token comment"># 也可以把compose的容器日志输出到日志文件里去，然后用tail -f 随时查看</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-app.yml logs <span class="token parameter variable">-f</span> <span class="token operator">&gt;&gt;</span> myDockerCompose.log <span class="token operator">&amp;</span>
<span class="token comment"># 重新构建有变化的镜像并更新到容器再启动</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-app.yml up <span class="token parameter variable">--build</span> <span class="token parameter variable">-d</span>
<span class="token comment"># 重新创建docker-compose.yml配置有变化的容器并启动</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-app.yml up --force-recreate <span class="token parameter variable">-d</span>
<span class="token comment">#停掉容器再删除容器</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-app.yml down        
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>编排电商微服务</strong></p><p>1、在docker-mall目录下分别创建tulingmall-authcenter，tulingmall-gateway，tulingmall-member，tulingmall-order，tulingmall-product目录。</p><p>2、修改电商项目上面这几个微服务配置文件里的中间件配置为上面docker compose里的服务名，并打好jar包放入上面对应的文件夹。</p><p>以tulingmall-product服务为例，对应修改后的配置文件如下(注意：大家按照自己下载项目的配置文件去修改，不要直接用我这里的配置，有可能版本不对)</p><p>bootstrap.yml文件配置：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> tulingmall<span class="token punctuation">-</span>product
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">config</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> nacos<span class="token punctuation">:</span><span class="token number">8848</span> <span class="token comment">#配置中心的地址</span>
        <span class="token key atrule">file-extension</span><span class="token punctuation">:</span> yml <span class="token comment">#配置文件结尾的配置</span>
        <span class="token key atrule">shared-dataids</span><span class="token punctuation">:</span> tulingmall<span class="token punctuation">-</span>nacos.yml<span class="token punctuation">,</span>tulingmall<span class="token punctuation">-</span>db<span class="token punctuation">-</span>common.yml <span class="token comment">#图灵商城公共配置</span>
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span>
    <span class="token key atrule">active</span><span class="token punctuation">:</span> dev        
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>tulingmall-product-dev.yml文件配置：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8866</span>
  <span class="token key atrule">tomcat</span><span class="token punctuation">:</span>
    <span class="token key atrule">max-threads</span><span class="token punctuation">:</span> <span class="token number">100</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> tulingmall<span class="token punctuation">-</span>product
  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> redis
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
    <span class="token key atrule">password</span><span class="token punctuation">:</span>  <span class="token comment">#密码</span>
    <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 5000ms
    <span class="token key atrule">lettuce</span><span class="token punctuation">:</span>
      <span class="token key atrule">pool</span><span class="token punctuation">:</span>
        <span class="token key atrule">max-active</span><span class="token punctuation">:</span> <span class="token number">50</span>
        <span class="token key atrule">max-wait</span><span class="token punctuation">:</span> <span class="token punctuation">-</span>1ms
        <span class="token key atrule">max-idle</span><span class="token punctuation">:</span> <span class="token number">8</span>
        <span class="token key atrule">min-idle</span><span class="token punctuation">:</span> <span class="token number">0</span>
        
<span class="token key atrule">management</span><span class="token punctuation">:</span> <span class="token comment">#开启SpringBoot Admin的监控</span>
  <span class="token key atrule">endpoints</span><span class="token punctuation">:</span>
    <span class="token key atrule">web</span><span class="token punctuation">:</span>
      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>
        <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">endpoint</span><span class="token punctuation">:</span>
    <span class="token key atrule">health</span><span class="token punctuation">:</span>
      <span class="token key atrule">show-details</span><span class="token punctuation">:</span> always

<span class="token key atrule">seata</span><span class="token punctuation">:</span>
  <span class="token key atrule">config</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> nacos<span class="token punctuation">:</span><span class="token number">8848</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> nacos
  <span class="token key atrule">registry</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> nacos
  <span class="token key atrule">tx-service-group</span><span class="token punctuation">:</span> my_test_tx_group
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">support</span><span class="token punctuation">:</span>
      <span class="token key atrule">spring</span><span class="token punctuation">:</span>
        <span class="token key atrule">datasource-autoproxy</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token comment">#zk配置</span>
<span class="token key atrule">zk</span><span class="token punctuation">:</span>
  <span class="token key atrule">curator</span><span class="token punctuation">:</span>
    <span class="token key atrule">retryCount</span><span class="token punctuation">:</span> <span class="token number">5</span> <span class="token comment">#重试次数</span>
    <span class="token key atrule">elapsedTimeMs</span><span class="token punctuation">:</span> <span class="token number">5000</span> <span class="token comment">#</span>
    <span class="token key atrule">connectUrl</span><span class="token punctuation">:</span> zookeeper<span class="token punctuation">:</span><span class="token number">2181</span> <span class="token comment">#zk地址</span>
    <span class="token key atrule">sessionTimeOutMs</span><span class="token punctuation">:</span> <span class="token number">60000</span> <span class="token comment">#会话超时时间</span>
    <span class="token key atrule">connectionTimeOutMs</span><span class="token punctuation">:</span> <span class="token number">5000</span> <span class="token comment">#连接超时时间        </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>tulingmall-nacos.yml文件配置：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> nacos<span class="token punctuation">:</span><span class="token number">8848</span>      
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>tulingmall-db-common.yml文件配置：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//db<span class="token punctuation">:</span>3306/micromall<span class="token punctuation">?</span>serverTimezone=UTC<span class="token important">&amp;useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-</span><span class="token number">8</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> root
    <span class="token key atrule">druid</span><span class="token punctuation">:</span>
      <span class="token key atrule">initial-size</span><span class="token punctuation">:</span> <span class="token number">5</span> <span class="token comment">#连接池初始化大小</span>
      <span class="token key atrule">min-idle</span><span class="token punctuation">:</span> <span class="token number">10</span> <span class="token comment">#最小空闲连接数</span>
      <span class="token key atrule">max-active</span><span class="token punctuation">:</span> <span class="token number">20</span> <span class="token comment">#最大连接数</span>
      <span class="token key atrule">web-stat-filter</span><span class="token punctuation">:</span>
        <span class="token key atrule">exclusions</span><span class="token punctuation">:</span> <span class="token string">&quot;*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*&quot;</span> <span class="token comment">#不统计这些请求数据</span>
      <span class="token key atrule">stat-view-servlet</span><span class="token punctuation">:</span> <span class="token comment">#访问监控网页的登录用户名和密码</span>
        <span class="token key atrule">login-username</span><span class="token punctuation">:</span> druid
        <span class="token key atrule">login-password</span><span class="token punctuation">:</span> druid
<span class="token key atrule">mybatis</span><span class="token punctuation">:</span>
  <span class="token key atrule">mapper-locations</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> classpath<span class="token punctuation">:</span>dao/<span class="token important">*.xml</span>
    <span class="token punctuation">-</span> classpath<span class="token important">*:com/**/mapper/*.xml</span>       
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3、在每个微服务目录下新建一个Dockerfile，内容如下，以tulingmall-product服务为例，其它微服务都类似修改：</p><div class="language-docker line-numbers-mode" data-ext="docker"><pre class="language-docker"><code><span class="token comment"># 基于哪个镜像</span>
<span class="token instruction"><span class="token keyword">From</span> java:8</span>
<span class="token comment"># 复制文件到容器</span>
<span class="token instruction"><span class="token keyword">ADD</span> tulingmall-product-0.0.1-SNAPSHOT.jar /app.jar</span>
<span class="token comment"># 配置容器启动后执行的命令</span>
<span class="token instruction"><span class="token keyword">ENTRYPOINT</span> [<span class="token string">&quot;java&quot;</span>,<span class="token string">&quot;-jar&quot;</span>,<span class="token string">&quot;/app.jar&quot;</span>]  </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>​</p><p>4、在docker-mall目录下新建微服务编排文件docker-compose-app.yml，内容如下：</p><div class="language-docker line-numbers-mode" data-ext="docker"><pre class="language-docker"><code>version: &#39;3.8&#39;
services:
  tulingmall-authcenter:
    image: mall/tulingmall-authcenter:0.0.1  #指定镜像名称
    build: ./tulingmall-authcenter  #指定Dockfile所在路径
    container_name: tulingmall-authcenter  #指定启动容器名称
    ports:
      - 9999:9999
    volumes:
      - /etc/localtime:/etc/localtime:ro  #同步宿主机与容器时间，ro代表readonly只读
    environment:
      - JAVA_TOOL_OPTIONS=-Xmx1g -Xms1g -XX:MaxMetaspaceSize=512m -javaagent:/agent/skywalking-agent.jar -DSW_AGENT_NAME=tulingmall-order -DSW_AGENT_COLLECTOR_BACKEND_SERVICES=192.168.65.204:11800
    external_links:  #访问不在同一个compose文件管理的服务需要用external_links，前提是这些服务都在同一个网络下才能正常访问 
      - nacos:nacos  #可以用nacos这个域名访问nacos服务
      - mysql:db  #可以用db这个域名访问mysql服务
    cap_add:
      - SYS_PTRACE #这个参数是让docker能支持在容器里能执行jdk自带的类似jinfo，jmap这些命令，如果不需要在容器里执行这些命令可以不加
  tulingmall-gateway:
    image: mall/tulingmall-gateway:0.0.1
    build: ./tulingmall-gateway
    container_name: tulingmall-gateway
    ports:
      - 8888:8888
    volumes:
      - /etc/localtime:/etc/localtime:ro #同步宿主机与容器时间
    environment:
      - JAVA_TOOL_OPTIONS=-Xmx1g -Xms1g -XX:MaxMetaspaceSize=512m -javaagent:/agent/skywalking-agent.jar -DSW_AGENT_NAME=tulingmall-order -DSW_AGENT_COLLECTOR_BACKEND_SERVICES=192.168.65.204:11800
    depends_on:
      - tulingmall-authcenter #gateway在authcenter启动之后再启动
    external_links:
      - nacos:nacos
    cap_add:
      - SYS_PTRACE #这个参数是让docker能支持在容器里能执行jdk自带的类似jinfo，jmap这些命令，如果不需要在容器里执行这些命令可以不加
  tulingmall-member:
    image: mall/tulingmall-member:0.0.1
    build: ./tulingmall-member
    container_name: tulingmall-member
    ports:
      - 8877:8877
    volumes:
      - /etc/localtime:/etc/localtime:ro #同步宿主机与容器时间
    environment:
      - JAVA_TOOL_OPTIONS=-Xmx1g -Xms1g -XX:MaxMetaspaceSize=512m -javaagent:/agent/skywalking-agent.jar -DSW_AGENT_NAME=tulingmall-order -DSW_AGENT_COLLECTOR_BACKEND_SERVICES=192.168.65.204:11800
    external_links:
      - nacos:nacos
      - mysql:db #可以用db这个域名访问mysql服务
      - mongo
      - redis
      - rabbitmq
    cap_add:
      - SYS_PTRACE #这个参数是让docker能支持在容器里能执行jdk自带的类似jinfo，jmap这些命令，如果不需要在容器里执行这些命令可以不加
  tulingmall-product:
    image: mall/tulingmall-product:0.0.1
    build: ./tulingmall-product
    container_name: tulingmall-product
    ports:
      - 8866:8866
    volumes:
      - /etc/localtime:/etc/localtime:ro #同步宿主机与容器时间
    environment:
      - JAVA_TOOL_OPTIONS=-Xmx1g -Xms1g -XX:MaxMetaspaceSize=512m -javaagent:/agent/skywalking-agent.jar -DSW_AGENT_NAME=tulingmall-order -DSW_AGENT_COLLECTOR_BACKEND_SERVICES=192.168.65.204:11800
    external_links:
      - nacos:nacos
      - mysql:db #可以用db这个域名访问mysql服务
      - redis
      - zookeeper
    cap_add:
      - SYS_PTRACE #这个参数是让docker能支持在容器里能执行jdk自带的类似jinfo，jmap这些命令，如果不需要在容器里执行这些命令可以不加
  tulingmall-order:
    image: mall/tulingmall-order:0.0.1
    build: ./tulingmall-order
    container_name: tulingmall-order
    ports:
      - 8844:8844
    volumes:
      - /etc/localtime:/etc/localtime:ro #同步宿主机与容器时间
    environment:
      - JAVA_TOOL_OPTIONS=-Xmx1g -Xms1g -XX:MaxMetaspaceSize=512m -javaagent:/agent/skywalking-agent.jar -DSW_AGENT_NAME=tulingmall-order -DSW_AGENT_COLLECTOR_BACKEND_SERVICES=192.168.65.204:11800
    external_links:
      - nacos:nacos
      - mysql:db #可以用db这个域名访问mysql服务
      - redis
      - rabbitmq
      - namesrv:rockermq
    cap_add:
      - SYS_PTRACE #这个参数是让docker能支持在容器里能执行jdk自带的类似jinfo，jmap这些命令，如果不需要在容器里执行这些命令可以不加          
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5、启动compose的所有微服务容器，在docker-mall目录执行如下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#这里启动的微服务跟上面启动的mysql，redis这些中间件服务因为都在docker-mall目录下，即都是同一个工程下，默认都在相同的网络下，可以相互访问</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-app.yml up <span class="token parameter variable">-d</span>  
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>6、访问下微服务的api看是否都正常，访问接口参数参看视频，不一定访问我列的这几个接口，其它的接口也行</p><div class="language-ba line-numbers-mode" data-ext="ba"><pre class="language-ba"><code>1、通过网关访问登录接口获取token，post方式：
http://192.168.65.61:8888/sso/login?username=test&amp;password=test  
2、通过网关访问添加购物车接口，post方式：
http://192.168.65.61:8888/cart/add
3、通过网关访问查询购物车接口，get方式：
http://192.168.65.61:8888/cart/list
4、通过网关访问创建订单接口，post方式：
http://192.168.65.61:8888/order/generateOrder   
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>动态扩容微服务(单物理机内扩容)</strong></p><p>有时我们需要扩容微服务，比如我们想把用户和订单微服务各部署两个微服务，则需要将docker-compose.yml里的服务的端口映射和容器名称都注释掉，因为不可能两个订单服务的容器映射到宿主机的同一个端口，修改之后的docker-compose-app.yml内容如下：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3.8&#39;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">tulingmall-authcenter</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mall/tulingmall<span class="token punctuation">-</span>authcenter<span class="token punctuation">:</span>0.0.1  <span class="token comment">#指定镜像名称</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span> ./tulingmall<span class="token punctuation">-</span>authcenter  <span class="token comment">#指定Dockfile所在路径</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> tulingmall<span class="token punctuation">-</span>authcenter  <span class="token comment">#指定启动容器名称</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 9999<span class="token punctuation">:</span><span class="token number">9999</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /etc/localtime<span class="token punctuation">:</span>/etc/localtime<span class="token punctuation">:</span>ro  <span class="token comment">#同步宿主机与容器时间，ro代表readonly只读</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> JAVA_TOOL_OPTIONS=<span class="token punctuation">-</span>Xmx1g <span class="token punctuation">-</span>Xms1g <span class="token punctuation">-</span>XX<span class="token punctuation">:</span>MaxMetaspaceSize=256m <span class="token punctuation">-</span>javaagent<span class="token punctuation">:</span>/agent/skywalking<span class="token punctuation">-</span>agent.jar <span class="token punctuation">-</span>DSW_AGENT_NAME=tulingmall<span class="token punctuation">-</span>order <span class="token punctuation">-</span>DSW_AGENT_COLLECTOR_BACKEND_SERVICES=192.168.65.204<span class="token punctuation">:</span><span class="token number">11800</span>
    <span class="token key atrule">external_links</span><span class="token punctuation">:</span>  <span class="token comment">#访问不在同一个compose文件管理的服务需要用external_links，前提是这些服务都在同一个网络下才能正常访问 </span>
      <span class="token punctuation">-</span> nacos<span class="token punctuation">:</span>nacos  <span class="token comment">#可以用nacos这个域名访问nacos服务</span>
      <span class="token punctuation">-</span> mysql<span class="token punctuation">:</span>db  <span class="token comment">#可以用db这个域名访问mysql服务</span>
    <span class="token key atrule">cap_add</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> SYS_PTRACE <span class="token comment">#这个参数是让docker能支持在容器里能执行jdk自带的类似jinfo，jmap这些命令，如果不需要在容器里执行这些命令可以不加</span>
  <span class="token key atrule">tulingmall-gateway</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mall/tulingmall<span class="token punctuation">-</span>gateway<span class="token punctuation">:</span>0.0.1
    <span class="token key atrule">build</span><span class="token punctuation">:</span> ./tulingmall<span class="token punctuation">-</span>gateway
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> tulingmall<span class="token punctuation">-</span>gateway
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 8888<span class="token punctuation">:</span><span class="token number">8888</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /etc/localtime<span class="token punctuation">:</span>/etc/localtime<span class="token punctuation">:</span>ro <span class="token comment">#同步宿主机与容器时间</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> JAVA_TOOL_OPTIONS=<span class="token punctuation">-</span>Xmx1g <span class="token punctuation">-</span>Xms1g <span class="token punctuation">-</span>XX<span class="token punctuation">:</span>MaxMetaspaceSize=256m <span class="token punctuation">-</span>javaagent<span class="token punctuation">:</span>/agent/skywalking<span class="token punctuation">-</span>agent.jar <span class="token punctuation">-</span>DSW_AGENT_NAME=tulingmall<span class="token punctuation">-</span>order <span class="token punctuation">-</span>DSW_AGENT_COLLECTOR_BACKEND_SERVICES=192.168.65.204<span class="token punctuation">:</span><span class="token number">11800</span>
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> tulingmall<span class="token punctuation">-</span>authcenter <span class="token comment">#gateway在authcenter启动之后再启动</span>
    <span class="token key atrule">external_links</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> nacos<span class="token punctuation">:</span>nacos
    <span class="token key atrule">cap_add</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> SYS_PTRACE <span class="token comment">#这个参数是让docker能支持在容器里能执行jdk自带的类似jinfo，jmap这些命令，如果不需要在容器里执行这些命令可以不加</span>
  <span class="token key atrule">tulingmall-member</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mall/tulingmall<span class="token punctuation">-</span>member<span class="token punctuation">:</span>0.0.1
    <span class="token key atrule">build</span><span class="token punctuation">:</span> ./tulingmall<span class="token punctuation">-</span>member
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> tulingmall<span class="token punctuation">-</span>member
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 8877<span class="token punctuation">:</span><span class="token number">8877</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /etc/localtime<span class="token punctuation">:</span>/etc/localtime<span class="token punctuation">:</span>ro <span class="token comment">#同步宿主机与容器时间</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> JAVA_TOOL_OPTIONS=<span class="token punctuation">-</span>Xmx1g <span class="token punctuation">-</span>Xms1g <span class="token punctuation">-</span>XX<span class="token punctuation">:</span>MaxMetaspaceSize=256m <span class="token punctuation">-</span>javaagent<span class="token punctuation">:</span>/agent/skywalking<span class="token punctuation">-</span>agent.jar <span class="token punctuation">-</span>DSW_AGENT_NAME=tulingmall<span class="token punctuation">-</span>order <span class="token punctuation">-</span>DSW_AGENT_COLLECTOR_BACKEND_SERVICES=192.168.65.204<span class="token punctuation">:</span><span class="token number">11800</span>
    <span class="token key atrule">external_links</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> nacos<span class="token punctuation">:</span>nacos
      <span class="token punctuation">-</span> mysql<span class="token punctuation">:</span>db <span class="token comment">#可以用db这个域名访问mysql服务</span>
      <span class="token punctuation">-</span> mongo
      <span class="token punctuation">-</span> redis
      <span class="token punctuation">-</span> rabbitmq
    <span class="token key atrule">cap_add</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> SYS_PTRACE <span class="token comment">#这个参数是让docker能支持在容器里能执行jdk自带的类似jinfo，jmap这些命令，如果不需要在容器里执行这些命令可以不加</span>
  <span class="token key atrule">tulingmall-product</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mall/tulingmall<span class="token punctuation">-</span>product<span class="token punctuation">:</span>0.0.1
    <span class="token key atrule">build</span><span class="token punctuation">:</span> ./tulingmall<span class="token punctuation">-</span>product
<span class="token comment">#    container_name: tulingmall-product</span>
<span class="token comment">#    ports:</span>
<span class="token comment">#      - 8866:8866</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /etc/localtime<span class="token punctuation">:</span>/etc/localtime<span class="token punctuation">:</span>ro <span class="token comment">#同步宿主机与容器时间</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> JAVA_TOOL_OPTIONS=<span class="token punctuation">-</span>Xmx1g <span class="token punctuation">-</span>Xms1g <span class="token punctuation">-</span>XX<span class="token punctuation">:</span>MaxMetaspaceSize=256m <span class="token punctuation">-</span>javaagent<span class="token punctuation">:</span>/agent/skywalking<span class="token punctuation">-</span>agent.jar <span class="token punctuation">-</span>DSW_AGENT_NAME=tulingmall<span class="token punctuation">-</span>order <span class="token punctuation">-</span>DSW_AGENT_COLLECTOR_BACKEND_SERVICES=192.168.65.204<span class="token punctuation">:</span><span class="token number">11800</span>
    <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
      replicas<span class="token punctuation">:</span><span class="token number">2</span>
    <span class="token key atrule">external_links</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> nacos<span class="token punctuation">:</span>nacos
      <span class="token punctuation">-</span> mysql<span class="token punctuation">:</span>db <span class="token comment">#可以用db这个域名访问mysql服务</span>
      <span class="token punctuation">-</span> redis
      <span class="token punctuation">-</span> zookeeper
    <span class="token key atrule">cap_add</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> SYS_PTRACE <span class="token comment">#这个参数是让docker能支持在容器里能执行jdk自带的类似jinfo，jmap这些命令，如果不需要在容器里执行这些命令可以不加</span>
  <span class="token key atrule">tulingmall-order</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mall/tulingmall<span class="token punctuation">-</span>order<span class="token punctuation">:</span>0.0.1
    <span class="token key atrule">build</span><span class="token punctuation">:</span> ./tulingmall<span class="token punctuation">-</span>order
<span class="token comment">#    container_name: tulingmall-order</span>
<span class="token comment">#    ports:</span>
<span class="token comment">#      - 8844:8844</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /etc/localtime<span class="token punctuation">:</span>/etc/localtime<span class="token punctuation">:</span>ro <span class="token comment">#同步宿主机与容器时间</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> JAVA_TOOL_OPTIONS=<span class="token punctuation">-</span>Xmx1g <span class="token punctuation">-</span>Xms1g <span class="token punctuation">-</span>XX<span class="token punctuation">:</span>MaxMetaspaceSize=256m <span class="token punctuation">-</span>javaagent<span class="token punctuation">:</span>/agent/skywalking<span class="token punctuation">-</span>agent.jar <span class="token punctuation">-</span>DSW_AGENT_NAME=tulingmall<span class="token punctuation">-</span>order <span class="token punctuation">-</span>DSW_AGENT_COLLECTOR_BACKEND_SERVICES=192.168.65.204<span class="token punctuation">:</span><span class="token number">11800</span>
    <span class="token key atrule">external_links</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> nacos<span class="token punctuation">:</span>nacos
      <span class="token punctuation">-</span> mysql<span class="token punctuation">:</span>db <span class="token comment">#可以用db这个域名访问mysql服务</span>
      <span class="token punctuation">-</span> redis
      <span class="token punctuation">-</span> rabbitmq
      <span class="token punctuation">-</span> namesrv<span class="token punctuation">:</span>rockermq
    <span class="token key atrule">cap_add</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> SYS_PTRACE <span class="token comment">#这个参数是让docker能支持在容器里能执行jdk自带的类似jinfo，jmap这些命令，如果不需要在容器里执行这些命令可以不加</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行如下扩容命令，<strong>服务一旦扩容对应了多个容器，则访问服务名docker会自动帮我们负载均衡去访问服务对应的每台容器</strong>：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-app.yml up --force-recreate <span class="token parameter variable">-d</span>     <span class="token comment">#必须先正常编排微服务，然后才能动态扩容,文件有变动，需要重新创建容器</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-app.yml scale tulingmall-order<span class="token operator">=</span><span class="token number">2</span> tulingmall-product<span class="token operator">=</span><span class="token number">2</span>   
<span class="token comment">#如果要缩容执行如下操作</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-app.yml scale tulingmall-order<span class="token operator">=</span><span class="token number">1</span> tulingmall-product<span class="token operator">=</span><span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意：docker compose主要用在单物理机内扩容的情况，要做多机扩容还需自己在多个机器上做很多定制化配置，当然，要做多物理机扩容一般都会用docker swarm或kubernetes。</p></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><div class="contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: thejqd@gmail.com">jiangqingdong</span><!--]--><!--]--></div></div></footer><!----><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><!----><div class="copyright">Copyright © 2023 江</div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-daeeb10b.js" defer></script>
  </body>
</html>
