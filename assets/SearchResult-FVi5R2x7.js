import{u as I,g as $,h as ee,i as U,j as ae,k as se,t as te,l as le,m as x,n as S,p as re,q as j,s,v as T,x as O,R as _,y as ue,z as pe,A as ce,B as ne,O as ie,P as oe,C as Ee,D as ge,E as ve,F as de,G as ye,H as he,I as Be,J as q}from"./app-CcJZcE5q.js";const fe=["/","/pages/4gs7jt/","/pages/5f19b8/","/pages/79f6fa/","/pages/8fd9db/","/pages/5hyd42/","/pages/06c8a8/","/pages/60b9cf/","/pages/5b853b/","/%E9%9D%A2%E8%AF%95/%E9%98%BF%E9%87%8C%E4%BA%91%E9%9D%A2%E8%AF%95%E9%A2%98.html","/pages/81ef2f/","/pages/c486e1/","/pages/b003d3/","/pages/c92b96/","/pages/d9ed45/","/pages/187ca5/","/pages/44b655/","/pages/659c00/","/pages/6af36a/","/pages/206e51/","/pages/7b5ba3/","/pages/dce166/","/pages/b70464/","/pages/736c6f/","/pages/f2c1da/","/pages/bf6627/","/pages/d2145d/","/pages/8c5c4e/","/pages/a0495c/","/pages/5a94a3/","/pages/f9f747/","/pages/1c44cf/","/pages/c9fbe2/","/pages/55c36c/","/pages/4259fb/","/pages/af0f96/","/pages/5dbb63/","/pages/2401735/","/pages/2401616/","/pages/5ae626/","/pages/7bda4d/","/pages/5655a2/","/pages/d20586/","/pages/01dad9/","/pages/2d0b5c/","/pages/e79a05/","/pages/f7b862/","/pages/ed68ae/","/pages/82ddb8/","/pages/064b4c/","/pages/13f0c8/","/pages/2491fa/","/%E5%BE%AE%E6%9C%8D%E5%8A%A1/seata/00.%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%BB%84%E4%BB%B6Seata.html","/pages/202308030516/","/pages/1c9782/","/pages/0313c2/","/pages/cf3104/","/pages/a1a2b6/","/pages/21b942/","/%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/00.MySQL/06.MySQL%E4%BA%8B%E5%8A%A1%E5%8E%9F%E7%90%86%E4%B8%8E%E4%BC%98%E5%8C%96%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5.html","/%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/00.MySQL/07.MySQL%E9%94%81%E6%9C%BA%E5%88%B6%E4%B8%8E%E4%BC%98%E5%8C%96%E5%AE%9E%E8%B7%B5%E4%BB%A5%E5%8F%8AMVCC%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90.html","/pages/12192426/","/pages/12192914/","/pages/12194314/","/pages/12e355/","/pages/31133111/","/pages/202308020557/","/%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/03.%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/20.ShardingJDBC%E6%BA%90%E7%A0%81%E4%B8%8E%E5%86%85%E6%A0%B8%E8%A7%A3%E6%9E%90.html","/pages/a80a7f/","/pages/a3b500/","/pages/fd3a46/","/pages/d64172/","/pages/1d1280/","/pages/c9b6ed/","/pages/80485b/","/pages/bc8703/","/pages/c6a494/","/pages/3ccf9f/","/pages/20557c/","/pages/9a014b/","/pages/b891f5/","/pages/ae15fa/","/pages/def779/","/pages/d02edd/","/pages/1b65ca/","/pages/aba13a/","/pages/f720d9/","/pages/202308230721/","/pages/202308230723/","/404.html","/pages/","/%E9%9D%A2%E8%AF%95/","/%E5%BE%AE%E6%9C%8D%E5%8A%A1/seata/","/%E5%BE%AE%E6%9C%8D%E5%8A%A1/","/%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/00.MySQL/","/%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/","/%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/03.%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/"],Ae="SEARCH_PRO_QUERY_HISTORY",g=I(Ae,[]),me=()=>{const{queryHistoryCount:t}=q,l=t>0;return{enabled:l,queryHistory:g,addQueryHistory:r=>{l&&(g.value.length<t?g.value=Array.from(new Set([r,...g.value])):g.value=Array.from(new Set([r,...g.value.slice(0,t-1)])))},removeQueryHistory:r=>{g.value=[...g.value.slice(0,r),...g.value.slice(r+1)]}}},w=t=>fe[t.id]+("anchor"in t?`#${t.anchor}`:""),be="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:k}=q,v=I(be,[]),Ce=()=>{const t=k>0;return{enabled:t,resultHistory:v,addResultHistory:l=>{if(t){const r={link:w(l),display:l.display};"header"in l&&(r.header=l.header),v.value.length<k?v.value=[r,...v.value]:v.value=[r,...v.value.slice(0,k-1)]}},removeResultHistory:l=>{v.value=[...v.value.slice(0,l),...v.value.slice(l+1)]}}},He=t=>{const l=ie(),r=U(),{search:b,terminate:o}=oe(),y=x(!1),h=Ee([]);return ge(()=>{const d=()=>{h.value=[],y.value=!1},C=Be(B=>{y.value=!0,B?b({type:"search",query:B,locale:r.value,options:l.value}).then(E=>{h.value=E,y.value=!1}).catch(E=>{console.error(E),d()}):d()},q.searchDelay);j([t,r],()=>C(t.value),{immediate:!0}),ve(()=>{o()})}),{searching:y,results:h}};var De=$({name:"SearchResult",props:{query:{type:String,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(t,{emit:l}){const r=ee(),b=U(),o=ae(se),{enabled:y,addQueryHistory:h,queryHistory:d,removeQueryHistory:C}=me(),{enabled:B,resultHistory:E,addResultHistory:F,removeResultHistory:J}=Ce(),L=y||B,H=te(t,"query"),{results:f,searching:V}=He(H),u=le({isQuery:!0,index:0}),n=x(0),i=x(0),M=S(()=>L&&(d.value.length>0||E.value.length>0)),Q=S(()=>f.value.length>0),D=S(()=>f.value[n.value]||null),Y=()=>{const{isQuery:e,index:a}=u;a===0?(u.isQuery=!e,u.index=e?E.value.length-1:d.value.length-1):u.index=a-1},z=()=>{const{isQuery:e,index:a}=u;a===(e?d.value.length-1:E.value.length-1)?(u.isQuery=!e,u.index=0):u.index=a+1},G=()=>{n.value=n.value>0?n.value-1:f.value.length-1,i.value=D.value.contents.length-1},K=()=>{n.value=n.value<f.value.length-1?n.value+1:0,i.value=0},N=()=>{i.value<D.value.contents.length-1?i.value+=1:K()},W=()=>{i.value>0?i.value-=1:G()},R=e=>e.map(a=>de(a)?a:s(a[0],a[1])),X=e=>{if(e.type==="customField"){const a=ye[e.index]||"$content",[p,m=""]=he(a)?a[b.value].split("$content"):a.split("$content");return e.display.map(c=>s("div",R([p,...c,m])))}return e.display.map(a=>s("div",R(a)))},A=()=>{n.value=0,i.value=0,l("updateQuery",""),l("close")};return re("keydown",e=>{if(t.isFocusing){if(Q.value){if(e.key==="ArrowUp")W();else if(e.key==="ArrowDown")N();else if(e.key==="Enter"){const a=D.value.contents[i.value];h(t.query),F(a),r.push(w(a)),A()}}else if(B){if(e.key==="ArrowUp")Y();else if(e.key==="ArrowDown")z();else if(e.key==="Enter"){const{index:a}=u;u.isQuery?(l("updateQuery",d.value[a]),e.preventDefault()):(r.push(E.value[a].link),A())}}}}),j([n,i],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>s("div",{class:["search-pro-result-wrapper",{empty:H.value?!Q.value:!M.value}],id:"search-pro-results"},H.value===""?L?M.value?[y?s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},o.value.queryHistory),d.value.map((e,a)=>s("div",{class:["search-pro-result-item",{active:u.isQuery&&u.index===a}],onClick:()=>{l("updateQuery",e)}},[s(T,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},e),s("button",{class:"search-pro-remove-icon",innerHTML:O,onClick:p=>{p.preventDefault(),p.stopPropagation(),C(a)}})]))])):null,B?s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},o.value.resultHistory),E.value.map((e,a)=>s(_,{to:e.link,class:["search-pro-result-item",{active:!u.isQuery&&u.index===a}],onClick:()=>{A()}},()=>[s(T,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[e.header?s("div",{class:"content-header"},e.header):null,s("div",e.display.map(p=>R(p)).flat())]),s("button",{class:"search-pro-remove-icon",innerHTML:O,onClick:p=>{p.preventDefault(),p.stopPropagation(),J(a)}})]))])):null]:o.value.emptyHistory:o.value.emptyResult:V.value?s(ue,{hint:o.value.searching}):Q.value?s("ul",{class:"search-pro-result-list"},f.value.map(({title:e,contents:a},p)=>{const m=n.value===p;return s("li",{class:["search-pro-result-list-item",{active:m}]},[s("div",{class:"search-pro-result-title"},e||o.value.defaultTitle),a.map((c,Z)=>{const P=m&&i.value===Z;return s(_,{to:w(c),class:["search-pro-result-item",{active:P,"aria-selected":P}],onClick:()=>{h(t.query),F(c),A()}},()=>[c.type==="text"?null:s(c.type==="title"?pe:c.type==="heading"?ce:ne,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[c.type==="text"&&c.header?s("div",{class:"content-header"},c.header):null,s("div",X(c))])])})])})):o.value.emptyResult)}});export{De as default};
